---
title: Obtener la configuración de dominio de un servidor de Exchange
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 2f9acb81-5135-4f72-94e8-65c235d725e6
description: Aprenda a obtener la configuración del dominio de un servidor Exchange mediante el servicio Detección automática.
ms.openlocfilehash: 0dd990cc82762936e7827115685ce0178eafb5ae
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/25/2018
ms.locfileid: "19763070"
---
# <a name="get-domain-settings-from-an-exchange-server"></a><span data-ttu-id="48278-103">Obtener la configuración de dominio de un servidor de Exchange</span><span class="sxs-lookup"><span data-stu-id="48278-103">Get domain settings from an Exchange server</span></span>

<span data-ttu-id="48278-104">Aprenda a obtener la configuración del dominio de un servidor Exchange mediante el servicio Detección automática.</span><span class="sxs-lookup"><span data-stu-id="48278-104">Learn how to get domain settings from an Exchange server by using the Autodiscover service.</span></span>
  
<span data-ttu-id="48278-p101">Puede recuperar información de configuración de un dominio de correo electrónico mediante el servicio Detección automática. El servicio Detección automática proporciona un proceso a la aplicación para conectarse al punto de conexión del servicio correcto de un dominio específico.</span><span class="sxs-lookup"><span data-stu-id="48278-p101">You can retrieve configuration information for an email domain by using the Autodiscover service. The Autodiscover service provides your application with a process for connecting to the correct service endpoint for a specific domain.</span></span>
  
<span data-ttu-id="48278-107">Puede usar una de las siguientes tecnologías de desarrollo para tener acceso al servicio Detección automática:</span><span class="sxs-lookup"><span data-stu-id="48278-107">You can use one of the following development technologies to access the Autodiscover service:</span></span>
  
- <span data-ttu-id="48278-108">La API administrada de servicios Web Exchange (EWS)</span><span class="sxs-lookup"><span data-stu-id="48278-108">The Exchange Web Services (EWS) Managed API</span></span>
    
- <span data-ttu-id="48278-109">EWS</span><span class="sxs-lookup"><span data-stu-id="48278-109">EWS</span></span>
    
    <span data-ttu-id="48278-110">Si usa EWS, puede usar los métodos siguientes para recuperar la configuración de usuario:</span><span class="sxs-lookup"><span data-stu-id="48278-110">If you are using EWS, you can use the following methods to retrieve user settings:</span></span>
    
  - <span data-ttu-id="48278-111">El servicio Detección automática basado en SOAP</span><span class="sxs-lookup"><span data-stu-id="48278-111">The SOAP-based Autodiscover service</span></span>
    
  - <span data-ttu-id="48278-112">El servicio Detección automática XML (POX)</span><span class="sxs-lookup"><span data-stu-id="48278-112">The XML (POX) Autodiscover service</span></span>
    
  - <span data-ttu-id="48278-113">Un proxy generado automáticamente se ha generado del servicio Detección automática de XML o SOAP</span><span class="sxs-lookup"><span data-stu-id="48278-113">An autogenerated proxy generated from the SOAP or XML Autodiscover service</span></span>
    
    <span data-ttu-id="48278-114">Para obtener más información acerca de estos métodos, vea [detección automática de Exchange](autodiscover-for-exchange.md).</span><span class="sxs-lookup"><span data-stu-id="48278-114">For more information about these methods, see [Autodiscover for Exchange](autodiscover-for-exchange.md).</span></span>
    
<span data-ttu-id="48278-p102">La API administrada de EWS proporciona una interfaz basada en objetos para recuperar la configuración de usuario. Si su aplicación cliente usa un código administrado, le recomendamos que use la API administrada de EWS. La interfaz de la API administrada de EWS está mejor optimizada para un modelo de objetos simples que el típico proxy de servicio web generado automáticamente. </span><span class="sxs-lookup"><span data-stu-id="48278-p102">The EWS Managed API provides an object-based interface for retrieving user settings. If your client application uses managed code, we recommend that you use the EWS Managed API. The EWS Managed API interface is better optimized for a simple object model than the typical autogenerated web service proxy.</span></span> 
  
<span data-ttu-id="48278-118">Si está usando EWS, le sugerimos que use el servicio Detección automática de SOAP, ya que admite un conjunto superior de características que el servicio Detección automática de POX.</span><span class="sxs-lookup"><span data-stu-id="48278-118">If you are using EWS, we suggest that you use the SOAP Autodiscover service, because it supports a richer set of features than the POX Autodiscover service.</span></span>
  
<span data-ttu-id="48278-p103">El servicio Detección automática solo devuelve las opciones de configuración solicitadas. En la siguiente tabla se enumeran las opciones de configuración del dominio que puede devolver el servicio Detección automática.</span><span class="sxs-lookup"><span data-stu-id="48278-p103">The Autodiscover service returns only the requested configuration settings. The following table lists the domain configuration settings that the Autodiscover service can return.</span></span>
  
<span data-ttu-id="48278-121">**La tabla 1: Opciones de configuración de dominio**</span><span class="sxs-lookup"><span data-stu-id="48278-121">**Table 1: Domain configuration settings**</span></span>

|<span data-ttu-id="48278-122">**Opción de configuración**</span><span class="sxs-lookup"><span data-stu-id="48278-122">**Configuration setting**</span></span>|<span data-ttu-id="48278-123">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="48278-123">**Description**</span></span>|
|:-----|:-----|
|<span data-ttu-id="48278-124">ExternalEwsUrl</span><span class="sxs-lookup"><span data-stu-id="48278-124">ExternalEwsUrl</span></span>  <br/> |<span data-ttu-id="48278-125">La dirección URL externa para EWS.</span><span class="sxs-lookup"><span data-stu-id="48278-125">The external URL for EWS.</span></span>  <br/> |
|<span data-ttu-id="48278-126">ExternalEwsVersion</span><span class="sxs-lookup"><span data-stu-id="48278-126">ExternalEwsVersion</span></span>  <br/> |<span data-ttu-id="48278-127">La versión del servidor Exchange que hospeda la dirección URL de EWS.</span><span class="sxs-lookup"><span data-stu-id="48278-127">The version of the Exchange server that hosts the EWS URL.</span></span>  <br/> |
   
## <a name="prerequisites-for-getting-domain-settings"></a><span data-ttu-id="48278-128">Requisitos previos para obtener la configuración del dominio</span><span class="sxs-lookup"><span data-stu-id="48278-128">Prerequisites for getting domain settings</span></span>
<span data-ttu-id="48278-129"><a name="bk_Prereq"> </a></span><span class="sxs-lookup"><span data-stu-id="48278-129"></span></span>

<span data-ttu-id="48278-130">Antes de crear una aplicación que se conecte al servicio Detección automática para obtener la configuración del dominio, asegúrese de que tiene acceso a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="48278-130">Before you create an application that connects to the Autodiscover service to get domain settings, make sure that you have access to the following:</span></span>
  
- <span data-ttu-id="48278-p104">Exchange Online, Exchange Online como parte de Office 365 o un servidor que ejecuta una versión de Exchange a partir de Exchange 2007. Si está usando el servicio Detección automática basado en SOAP de EWS, un servidor que ejecuta una versión de Exchange a partir de Exchange 2010.</span><span class="sxs-lookup"><span data-stu-id="48278-p104">Exchange Online, Exchange Online as part of Office 365, or a server running a version of Exchange starting with Exchange 2007. If you are using the EWS SOAP-based Autodiscover service, a server running a version of Exchange starting with Exchange 2010.</span></span>
    
- <span data-ttu-id="48278-133">Un servidor de Exchange que está configurado para aceptar conexiones desde la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="48278-133">An Exchange server that is configured to accept connections from your client application.</span></span> <span data-ttu-id="48278-134">Para obtener información acerca de cómo configurar el servidor de Exchange, vea [controlar el acceso de la aplicación de cliente para EWS en Exchange](controlling-client-application-access-to-ews-in-exchange.md).</span><span class="sxs-lookup"><span data-stu-id="48278-134">For information about how to configure your Exchange server, see [Controlling client application access to EWS in Exchange](controlling-client-application-access-to-ews-in-exchange.md).</span></span>
    
- <span data-ttu-id="48278-135">Una cuenta que está autorizada para uso de EWS.</span><span class="sxs-lookup"><span data-stu-id="48278-135">An account that is authorized to use EWS.</span></span> <span data-ttu-id="48278-136">Para obtener información acerca de cómo configurar una cuenta, vea [controlar el acceso de la aplicación de cliente para EWS en Exchange](controlling-client-application-access-to-ews-in-exchange.md).</span><span class="sxs-lookup"><span data-stu-id="48278-136">For information about how to configure an account, see [Controlling client application access to EWS in Exchange](controlling-client-application-access-to-ews-in-exchange.md).</span></span>
    
> [!NOTE]
> <span data-ttu-id="48278-137">Si está utilizando la API administrada de EWS, debe proporcionar una devolución de llamada de validación de certificado en algunas circunstancias.</span><span class="sxs-lookup"><span data-stu-id="48278-137">If you are using the EWS Managed API, you must provide a certificate validation callback in some circumstances.</span></span> <span data-ttu-id="48278-138">También es posible que deba una devolución de llamada de validación de certificado con algunas bibliotecas proxy generado, como las creadas por Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="48278-138">You may also need a certificate validation callback with some generated proxy libraries, such as those created by Visual Studio.</span></span> <span data-ttu-id="48278-139">Para obtener más información, vea [validar un certificado de servidor para la API administrada de EWS](how-to-validate-a-server-certificate-for-the-ews-managed-api.md).</span><span class="sxs-lookup"><span data-stu-id="48278-139">For more information, see [Validate a server certificate for the EWS Managed API](how-to-validate-a-server-certificate-for-the-ews-managed-api.md).</span></span> 
  
### <a name="core-concepts-for-getting-domain-settings"></a><span data-ttu-id="48278-140">Conceptos básicos para obtener la configuración del dominio</span><span class="sxs-lookup"><span data-stu-id="48278-140">Core concepts for getting domain settings</span></span>
<span data-ttu-id="48278-141"><a name="bk_Core"> </a></span><span class="sxs-lookup"><span data-stu-id="48278-141"></span></span>

<span data-ttu-id="48278-142">Antes de que use la Detección automática para obtener la configuración del dominio, debería familiarizarse con los conceptos que se enumeran en la siguiente tabla.</span><span class="sxs-lookup"><span data-stu-id="48278-142">Before you use Autodiscover to get domain settings, you should be familiar with the concepts listed in the following table.</span></span>
  
|<span data-ttu-id="48278-143">**Concepto**</span><span class="sxs-lookup"><span data-stu-id="48278-143">**Concept**</span></span>|<span data-ttu-id="48278-144">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="48278-144">**Description**</span></span>|
|:-----|:-----|
|[<span data-ttu-id="48278-145">Detección automática de Exchange</span><span class="sxs-lookup"><span data-stu-id="48278-145">Autodiscover for Exchange</span></span>](autodiscover-for-exchange.md) <br/> |<span data-ttu-id="48278-146">Proporciona información general del funcionamiento del servicio Detección automática.</span><span class="sxs-lookup"><span data-stu-id="48278-146">Provides an overview of how the Autodiscover service works.</span></span>  <br/> |
|[<span data-ttu-id="48278-147">Usar detección automática para buscar puntos de conexión</span><span class="sxs-lookup"><span data-stu-id="48278-147">Use Autodiscover to find connection points</span></span>](how-to-use-autodiscover-to-find-connection-points.md) <br/> |<span data-ttu-id="48278-148">Describe el proceso que ha usado el servicio Detección automática para redirigir la aplicación cliente al punto de conexión de servicio correcto.</span><span class="sxs-lookup"><span data-stu-id="48278-148">Describes the process used by the Autodiscover service to redirect your client application to the correct service endpoint.</span></span>  <br/> |
   
<span data-ttu-id="48278-149">Si está utilizando la API administrada de EWS, use la clase [Microsoft.Exchange.WebServices.Data.ExchangeService](http://msdn.microsoft.com/en-us/library/exchange/dd635811%28v=exchg.80%29.aspx) en el espacio de nombres [Microsoft.Exchange.WebServices.Data](http://msdn.microsoft.com/en-us/library/exchange/dd633907%28v=exchg.80%29.aspx) para administrar la conexión a EWS.</span><span class="sxs-lookup"><span data-stu-id="48278-149">If you are using the EWS Managed API, you use the [Microsoft.Exchange.WebServices.Data.ExchangeService](http://msdn.microsoft.com/en-us/library/exchange/dd635811%28v=exchg.80%29.aspx) class in the [Microsoft.Exchange.WebServices.Data](http://msdn.microsoft.com/en-us/library/exchange/dd633907%28v=exchg.80%29.aspx) namespace to manage your connection to EWS.</span></span> <span data-ttu-id="48278-150">Los ejemplos de código en esta sección se suponen que hace referencia a los siguientes espacios de nombres en el código:</span><span class="sxs-lookup"><span data-stu-id="48278-150">The code examples in this section assume that you reference the following namespaces in your code:</span></span> 
  
- <span data-ttu-id="48278-151">**System.Net**</span><span class="sxs-lookup"><span data-stu-id="48278-151">**System.Net**</span></span>
    
- <span data-ttu-id="48278-152">**Microsoft.Exchange.WebServices.Data.ExchangeService**</span><span class="sxs-lookup"><span data-stu-id="48278-152">**Microsoft.Exchange.WebServices.Data.ExchangeService**</span></span>
    
## <a name="get-domain-settings-by-using-the-ews-managed-api"></a><span data-ttu-id="48278-153">Obtener la configuración del dominio mediante la API administrada de EWS</span><span class="sxs-lookup"><span data-stu-id="48278-153">Get domain settings by using the EWS Managed API</span></span>
<span data-ttu-id="48278-154"><a name="bk_Managed"> </a></span><span class="sxs-lookup"><span data-stu-id="48278-154"></span></span>

<span data-ttu-id="48278-155">Si está utilizando la API administrada de EWS, puede usar el método [Microsoft.Exchange.WebServices.Data.AutodiscoverSettings.GetUserSettings](http://msdn.microsoft.com/en-us/library/exchange/microsoft.exchange.webservices.autodiscover.autodiscoverservice.getusersettings%28v=exchg.80%29.aspx) del objeto [Microsoft.Exchange.WebServices.Data.AutodiscoverService](http://msdn.microsoft.com/en-us/library/exchange/dd634321%28v=exchg.80%29.aspx) para generar la solicitud que recupera información de configuración para un dominio, tal como se muestra en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="48278-155">If you are using the EWS Managed API, you can use the [Microsoft.Exchange.WebServices.Data.AutodiscoverSettings.GetUserSettings](http://msdn.microsoft.com/en-us/library/exchange/microsoft.exchange.webservices.autodiscover.autodiscoverservice.getusersettings%28v=exchg.80%29.aspx) method of the [Microsoft.Exchange.WebServices.Data.AutodiscoverService](http://msdn.microsoft.com/en-us/library/exchange/dd634321%28v=exchg.80%29.aspx) object to generate the request that retrieves configuration information for a domain, as shown in the following example.</span></span> <span data-ttu-id="48278-156">En este ejemplo, solo algunas de las opciones de dominio posibles se solicitan y se devuelven sólo los valores solicitados desde el servidor.</span><span class="sxs-lookup"><span data-stu-id="48278-156">In this example, only some of the possible domain settings are requested, and only the requested settings are returned from the server.</span></span> 
  
```cs
AutodiscoverService autodiscoverService = new AutodiscoverService("domain.contoso.com");
autodiscoverService.Credentials = new NetworkCredential("User1", "password", "domain.contoso.com");
// Submit a request and get the settings. The response contains only the
// settings that are requested, if they exist.
GetDomainSettingsResponse domainresponse = autodiscoverService.GetDomainSettings(
    "domain",
    ExchangeVersion.Exchang2013,
    DomainSettingName.ExternalEwsUrl,
    DomainSettingName.ExternalEwsVersion);
```

<span data-ttu-id="48278-p110">Puede analizar la colección que se ha devuelto para tener acceso a cada par clave-valor. En el siguiente ejemplo se muestra cómo analizar mediante cada elemento devuelto y mostrar el nombre y el valor de cada par clave-valor.</span><span class="sxs-lookup"><span data-stu-id="48278-p110">You can parse the collection returned to access each key/value pair. The following example shows how to parse through each returned element and display the name and value of each key/value pair.</span></span>
  
```cs
// Display each retrieved value. The settings are part of a key/value pair.
foreach (KeyValuePair<DomainSettingName, Object> domainsetting in domainresponse.Settings)
{
    Console.WriteLine(domainsetting.Key.ToString() + ": " + domainsetting.Value.ToString());
}
```

<span data-ttu-id="48278-159">Como alternativa, puede obtener el valor de una configuración específica.</span><span class="sxs-lookup"><span data-stu-id="48278-159">Alternatively, you can obtain the value of a specific setting.</span></span> <span data-ttu-id="48278-160">En el siguiente ejemplo, el valor de **ExternalEwsUrl** es que se mostrará.</span><span class="sxs-lookup"><span data-stu-id="48278-160">In the following example, the **ExternalEwsUrl** setting is to be displayed.</span></span> 
  
```cs
// Display a specific setting, such as ExternalEwsUrl.
Console.WriteLine(domainresponse.Settings[DomainSettingName.ExternalEwsUrl]);
```

## <a name="get-user-settings-by-using-ews-soap-autodiscover"></a><span data-ttu-id="48278-161">Obtener la configuración de usuario mediante la Detección automática SOAP de EWS</span><span class="sxs-lookup"><span data-stu-id="48278-161">Get user settings by using EWS SOAP Autodiscover</span></span>
<span data-ttu-id="48278-162"><a name="bk_SOAP"> </a></span><span class="sxs-lookup"><span data-stu-id="48278-162"></span></span>

<span data-ttu-id="48278-163">En el siguiente ejemplo se muestra una solicitud XML de SOAP para obtener la configuración de dominio del servicio Detección automática.</span><span class="sxs-lookup"><span data-stu-id="48278-163">The following example shows a SOAP XML request to get both domain settings from the Autodiscover service.</span></span>
  
```XML
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:a="http://schemas.microsoft.com/exchange/2010/Autodiscover" 
        xmlns:wsa="http://www.w3.org/2005/08/addressing" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <a:RequestedServerVersion>Exchange2013</a:RequestedServerVersion>
    <wsa:Action>http://schemas.microsoft.com/exchange/2010/Autodiscover/Autodiscover/GetDomainSettings</wsa:Action>
    <wsa:To>https://autodiscover.exchange.microsoft.com/autodiscover/autodiscover.svc</wsa:To>
  </soap:Header>
  <soap:Body>
    <a:GetDomainSettingsRequestMessage xmlns:a="http://schemas.microsoft.com/exchange/2010/Autodiscover">
      <a:Request>
        <a:Domains>
          <a:Domain>domain</a:Domain>
        </a:Domains>
        <a:RequestedSettings>
          <a:Setting>ExternalEwsUrl</a:Setting>
          <a:Setting>ExternalEwsVersion</a:Setting>
        </a:RequestedSettings>
        <a:RequestedVersion>Exchange2013</a:RequestedVersion>
      </a:Request>
    </a:GetDomainSettingsRequestMessage>
  </soap:Body>
</soap:Envelope>
```

<span data-ttu-id="48278-164">En el siguiente ejemplo se muestra la respuesta XML que se ha devuelto del servidor después de que analice la solicitud del cliente.</span><span class="sxs-lookup"><span data-stu-id="48278-164">The following example shows the XML response that is returned by the server after it parses the request from the client.</span></span>
  
```XML
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" 
        xmlns:a="http://www.w3.org/2005/08/addressing">
  <s:Header>
    <a:Action s:mustUnderstand="1">http://schemas.microsoft.com/exchange/2010/
          Autodiscover/Autodiscover/GetDomainSettingsResponse</a:Action>
    <h:ServerVersionInfo xmlns:h="http://schemas.microsoft.com/exchange/2010/Autodiscover" 
          xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
      <h:MajorVersion>15</h:MajorVersion>
      <h:MinorVersion>0</h:MinorVersion>
      <h:MajorBuildNumber>160</h:MajorBuildNumber>
      <h:MinorBuildNumber>4</h:MinorBuildNumber>
      <h:Version>Exchange2013</h:Version>
    </h:ServerVersionInfo>
  </s:Header>
  <s:Body>
    <GetDomainSettingsResponseMessage xmlns="http://schemas.microsoft.com/exchange/2010/Autodiscover">
      <Response xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <ErrorCode>NoError</ErrorCode>
        <ErrorMessage />
        <DomainResponses>
          <DomainResponse>
            <ErrorCode>NoError</ErrorCode>
            <ErrorMessage>No error.</ErrorMessage>
            <DomainSettingErrors />
            <DomainSettings>
              <DomainSetting i:type="DomainStringSetting">
                <Name>ExternalEwsUrl</Name>
                <Value>https://failover.exchange.microsoft.com/ews/exchange.asmx</Value>
              </DomainSetting>
              <DomainSetting i:type="DomainStringSetting">
                <Name>ExternalEwsVersion</Name>
                <Value>15.00.0085.000</Value>
              </DomainSetting>
            </DomainSettings>
            <RedirectTarget i:nil="true" />
          </DomainResponse>
        </DomainResponses>
      </Response>
    </GetDomainSettingsResponseMessage>
  </s:Body>
</s:Envelope>
```

## <a name="next-steps"></a><span data-ttu-id="48278-165">Siguientes pasos</span><span class="sxs-lookup"><span data-stu-id="48278-165">Next steps</span></span>
<span data-ttu-id="48278-166"><a name="bk_Next"> </a></span><span class="sxs-lookup"><span data-stu-id="48278-166"></span></span>

<span data-ttu-id="48278-p112">La configuración de dominio proporciona la información básica que su cliente necesita para conectarse a EWS. Puede usar esta información para conectarse a EWS, o puede recuperar las opciones de configuración adicionales de una cuenta de correo electrónico del servidor. Para obtener más información, vea el siguiente artículo:</span><span class="sxs-lookup"><span data-stu-id="48278-p112">Domain settings provide the basic information that your client needs to connect to EWS. You can use this information to connect to EWS, or you can retrieve additional configuration settings for an email account from the server. For more information, see the following article:</span></span>
  
- [<span data-ttu-id="48278-170">Obtener la configuración de usuario de Exchange mediante el uso de detección automática</span><span class="sxs-lookup"><span data-stu-id="48278-170">Get user settings from Exchange by using Autodiscover</span></span>](how-to-get-user-settings-from-exchange-by-using-autodiscover.md)
    
## <a name="see-also"></a><span data-ttu-id="48278-171">Vea también</span><span class="sxs-lookup"><span data-stu-id="48278-171">See also</span></span>


- [<span data-ttu-id="48278-172">Configurar una aplicación de EWS</span><span class="sxs-lookup"><span data-stu-id="48278-172">Setting up your EWS application</span></span>](setting-up-your-ews-application.md)
    
- [<span data-ttu-id="48278-173">Referencia de servicio web de detección automática para Exchange</span><span class="sxs-lookup"><span data-stu-id="48278-173">Autodiscover web service reference for Exchange</span></span>](http://msdn.microsoft.com/library/a01124a8-a8cf-4b80-8625-d7ee05690bca%28Office.15%29.aspx)
    
- [<span data-ttu-id="48278-174">Referencia EWS para Exchange</span><span class="sxs-lookup"><span data-stu-id="48278-174">EWS reference for Exchange</span></span>](http://msdn.microsoft.com/library/2a873474-1bb2-4cb1-a556-40e8c4159f4a%28Office.15%29.aspx)
    

