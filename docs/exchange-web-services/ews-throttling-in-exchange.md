---
title: Limitación de EWS en Exchange
manager: sethgros
ms.date: 05/10/2019
ms.audience: Developer
ms.assetid: b4fff4c9-c625-4d2a-9d14-bb28a5da5baf
description: Obtenga información sobre las directivas de limitación que afectan a EWS cuando se usa Exchange.
localization_priority: Priority
ms.openlocfilehash: 0c6ac49629ad4cdb4419cc8638d8e60ecb6509d6
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/03/2020
ms.locfileid: "44455404"
---
# <a name="ews-throttling-in-exchange"></a><span data-ttu-id="969e2-103">Limitación de EWS en Exchange</span><span class="sxs-lookup"><span data-stu-id="969e2-103">EWS throttling in Exchange</span></span>

<span data-ttu-id="969e2-104">Obtenga información sobre las directivas de limitación que afectan a EWS cuando se usa Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-104">Learn about the throttling policies that affect EWS when you are using Exchange.</span></span>

<span data-ttu-id="969e2-105">**Proporcionado por:** Escalas de Glen; Michael Mainer, Microsoft Corporation</span><span class="sxs-lookup"><span data-stu-id="969e2-105">**Provided by:** Glen Scales; Michael Mainer, Microsoft Corporation</span></span>

<span data-ttu-id="969e2-106">En este artículo se proporciona información sobre la limitación de EWS en Exchange Online, Exchange online como parte de Office 365 y las versiones locales de Exchange a partir de Exchange 2010.</span><span class="sxs-lookup"><span data-stu-id="969e2-106">The article provides information about EWS throttling in Exchange Online, Exchange Online as part of Office 365, and on-premises versions of Exchange starting with Exchange 2010.</span></span> <span data-ttu-id="969e2-107">La limitación en Exchange ayuda a garantizar la confiabilidad y el tiempo de actividad del servidor limitando la cantidad de recursos de servidor que un solo usuario o aplicación puede consumir.</span><span class="sxs-lookup"><span data-stu-id="969e2-107">Throttling in Exchange helps to ensure server reliability and uptime by limiting the amount of server resources that a single user or application can consume.</span></span> <span data-ttu-id="969e2-108">La limitación es una respuesta reactiva al uso excesivo de los recursos del sistema que pueden afectar a la confiabilidad y la funcionalidad del servicio.</span><span class="sxs-lookup"><span data-stu-id="969e2-108">Throttling is a reactive response to overuse of system resources that may affect service reliability and functionality.</span></span> <span data-ttu-id="969e2-109">Exchange supervisa constantemente el estado de los recursos de infraestructura críticos, como las bases de datos de buzones de correo.</span><span class="sxs-lookup"><span data-stu-id="969e2-109">Exchange constantly monitors the health of critical infrastructure resources, such as mailbox databases.</span></span> <span data-ttu-id="969e2-110">Cuando se detectan factores de carga elevados que degradan el rendimiento de estos recursos, las conexiones de EWS se limitan proporcionalmente en función de la cantidad que cada autor de llamada contribuye a la condición de carga alta.</span><span class="sxs-lookup"><span data-stu-id="969e2-110">When high load factors are detected that degrade the performance of these resources, EWS connections are throttled proportionally based on the amount that each caller has contributed to this high load condition.</span></span> <span data-ttu-id="969e2-111">El resultado es que un usuario puede encontrarse dentro del límite de limitación y seguir experimentando la ralentización hasta que el estado del recurso vuelve a los niveles operativos.</span><span class="sxs-lookup"><span data-stu-id="969e2-111">The result is that a user may be within their throttling limit and still experience slowdowns until the health of the resource is back to operational levels.</span></span>

<span data-ttu-id="969e2-112">Cada protocolo de acceso de cliente de Exchange, incluido EWS, tiene una directiva de limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-112">Each client access protocol in Exchange, including EWS, has a throttling policy.</span></span> <span data-ttu-id="969e2-113">Al diseñar aplicaciones que usan EWS, es importante tener en cuenta las directivas de limitación, para ayudar a garantizar la confiabilidad de la aplicación y el estado de su servidor de Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-113">When you design applications that use EWS, it is important to account for throttling policies, to help ensure application reliability and the health of your Exchange server.</span></span> <span data-ttu-id="969e2-114">En este artículo se identifican las diferentes directivas de limitación y límites de servicio para EWS, tanto si se destina a Exchange online como a versiones de Exchange locales a partir de Exchange Server 2010.</span><span class="sxs-lookup"><span data-stu-id="969e2-114">This article identifies the different throttling policies and service limits for EWS, whether you are targeting Exchange Online or versions of Exchange on-premises starting with Exchange Server 2010.</span></span> <span data-ttu-id="969e2-115">Según corresponda, este artículo también identifica las diferencias en las directivas de limitación en las diferentes versiones de Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-115">As applicable, this article also identifies differences in throttling policies in different versions of Exchange.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="969e2-116">La Directiva de limitación predeterminada, el acceso a la Directiva de limitación y la configuración de la Directiva de limitación difiere entre Exchange Online y Exchange local.</span><span class="sxs-lookup"><span data-stu-id="969e2-116">Default throttling policy, access to throttling policy, and throttling policy configuration differs between Exchange Online and Exchange on-premises.</span></span> <span data-ttu-id="969e2-117">Los valores de configuración de limitación específicos solo son precisos para una versión específica de Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-117">Specific throttling setting values are only accurate for a specific version of Exchange.</span></span> <span data-ttu-id="969e2-118">Debido a que la configuración de valores varía entre versiones y los administradores de Exchange pueden cambiar las directivas de limitación predeterminadas para implementaciones locales, este artículo no proporciona los valores de configuración predeterminados.</span><span class="sxs-lookup"><span data-stu-id="969e2-118">Because setting values vary across versions, and because Exchange administrators can change the default throttling policies for on-premises deployments, this article does not provide the default setting values.</span></span> <span data-ttu-id="969e2-119">Es más importante tener en cuenta las consideraciones que hay que tener en cuenta al diseñar una aplicación que funcione dentro de límites de limitación y que reaccione adecuadamente a los escenarios de limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-119">It is more important for you to be aware of the considerations for designing an application that functions within throttling limits and reacts appropriately to throttling scenarios.</span></span>

<span data-ttu-id="969e2-120">Si es desarrollador de aplicaciones, tiene que factorizar la limitación en el diseño de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="969e2-120">If you are an application developer, you need to factor throttling into your application design.</span></span> <span data-ttu-id="969e2-121">Las diferentes versiones de Exchange tienen valores predeterminados diferentes para los parámetros de limitación de EWS.</span><span class="sxs-lookup"><span data-stu-id="969e2-121">Different versions of Exchange have different default values for the EWS throttling parameters.</span></span> <span data-ttu-id="969e2-122">Las aplicaciones de servicio y cliente diseñadas para tener acceso a diferentes versiones de Exchange deberán tener en cuenta esta configuración, si son valores predeterminados, valores personalizados definidos por un administrador de Exchange o, como en Exchange Online, establecidos de forma predeterminada y no se pueden detectar.</span><span class="sxs-lookup"><span data-stu-id="969e2-122">Client and service applications that are designed to access different versions of Exchange will need to account for these settings, whether they be default values, custom values set by an Exchange administrator, or, as for Exchange Online, set by default and not discoverable.</span></span> <span data-ttu-id="969e2-123">Dado que los valores de los parámetros de limitación no se pueden descubrir mediante programación, las especificaciones de diseño de clientes deben incluir un plan para que la aplicación se adapte a límites de limitación potenciales diferentes.</span><span class="sxs-lookup"><span data-stu-id="969e2-123">Because throttling parameter values cannot be discovered programmatically, your client design specifications should include a plan for the application to adapt to different potential throttling limits.</span></span> <span data-ttu-id="969e2-124">Al diseñar aplicaciones multiproceso que tengan acceso a un gran número de buzones de correo o cuando muchos clientes obtengan acceso al mismo buzón, tenga en cuenta los límites de simultaneidad que la directiva predeterminada aplica a Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-124">When you design multi-threaded applications that will access a large number of mailboxes, or when many clients are accessing the same mailbox, consider the limits on concurrency that the default policy applies to Exchange.</span></span>

## <a name="throttling-policies-that-affect-ews"></a><span data-ttu-id="969e2-125">Directivas de limitación que afectan a EWS</span><span class="sxs-lookup"><span data-stu-id="969e2-125">Throttling policies that affect EWS</span></span>

<span data-ttu-id="969e2-126">Las directivas de limitación de Exchange no afectan solo EWS, sino también todas las conexiones de cliente al servidor Exchange, incluidos los protocolos usados por Office Outlook, Outlook Web App y Exchange ActiveSync.</span><span class="sxs-lookup"><span data-stu-id="969e2-126">The throttling polices in Exchange affect not only EWS, but also all client connections to the Exchange server, including the protocols used by Office Outlook, Outlook Web App, and Exchange ActiveSync.</span></span>

<span data-ttu-id="969e2-127">La Directiva de limitación de **CPUStartPercent** puede afectar al rendimiento de EWS al ejecutar Exchange 2010.</span><span class="sxs-lookup"><span data-stu-id="969e2-127">The **CPUStartPercent** throttling policy can affect EWS performance when you are running Exchange 2010.</span></span> <span data-ttu-id="969e2-128">Cuando el uso medio de CPU de los procesos de Exchange que se ejecutan en el servidor de acceso de cliente (incluido, entre otros, el proceso de EWS) supera el valor especificado por esta Directiva, las solicitudes de entrada se retrasarán para reducir el uso de la CPU.</span><span class="sxs-lookup"><span data-stu-id="969e2-128">When the average CPU utilization of Exchange processes running on the Client Access server — including, but not limited to, the EWS process — exceeds the value specified by this policy, inbound requests will be delayed to reduce CPU utilization.</span></span> <span data-ttu-id="969e2-129">No puede cambiar el valor de esta Directiva, pero saber sobre ella puede ayudarle a solucionar problemas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="969e2-129">You cannot change the value of this policy, but knowing about it can help you troubleshoot performance issues.</span></span> <span data-ttu-id="969e2-130">La lógica de muestreo que el servidor de acceso de cliente realiza para este valor es un promedio de una ventana graduada de 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="969e2-130">The sampling logic the Client Access server performs for this value is an average over a 10 second rolling window.</span></span> <span data-ttu-id="969e2-131">Esto permite que el proceso responda adecuadamente a los picos rápidos de uso de la CPU.</span><span class="sxs-lookup"><span data-stu-id="969e2-131">This allows the process to respond appropriately to quick spikes in CPU utilization.</span></span> <span data-ttu-id="969e2-132">Cuando se supera este umbral, se retrasan las conexiones entrantes a EWS.</span><span class="sxs-lookup"><span data-stu-id="969e2-132">When this threshold is exceeded, inbound connections to EWS are delayed.</span></span> <span data-ttu-id="969e2-133">Este retraso se limita a 500 milisegundos (mseg) a un uso teórico de la CPU 100% por cada solicitud de EWS.</span><span class="sxs-lookup"><span data-stu-id="969e2-133">This delay is capped at 500 milliseconds (msecs) at a theoretical 100% CPU usage per EWS request.</span></span> <span data-ttu-id="969e2-134">Si se pasa una solicitud EWS de lote para obtener 100 elementos, el servidor comprobará el uso de CPU 100 veces (una vez por elemento) durante un retraso máximo de 50 segundos.</span><span class="sxs-lookup"><span data-stu-id="969e2-134">If a batch EWS request to get 100 items is passed, the server will check the CPU usage 100 times (once per item) for a maximum delay of 50 seconds.</span></span> <span data-ttu-id="969e2-135">El tiempo de retraso es linealmente proporcional al uso de la CPU.</span><span class="sxs-lookup"><span data-stu-id="969e2-135">The delay time is linearly proportional to CPU usage.</span></span> <span data-ttu-id="969e2-136">En **CPUStartPercent**, el retraso es 0 (un rendimiento del subproceso) y aumenta linealmente hasta 500 ms en el 100% de uso de CPU.</span><span class="sxs-lookup"><span data-stu-id="969e2-136">At **CPUStartPercent**, the delay is 0 (a thread yield) and it increases linearly up to 500 msec at 100% CPU usage.</span></span> <span data-ttu-id="969e2-137">Como las directivas de limitación se aplican a todos los usuarios de Exchange, es improbable que el uso de la CPU supere el límite de **CPUStartPercent** en un servidor de acceso de cliente de Exchange, ya que los usuarios individuales o las aplicaciones no pueden obtener suficiente uso de CPU para afectar al funcionamiento del servidor.</span><span class="sxs-lookup"><span data-stu-id="969e2-137">Because throttling policies apply to all Exchange users, it's unlikely that CPU usage would exceed the **CPUStartPercent** limit on an Exchange Client Access server, because individual users or applications cannot gain enough CPU utilization to affect server operation.</span></span>

<span data-ttu-id="969e2-138">En la siguiente tabla se enumeran los parámetros de la Directiva de limitación que afectan a las aplicaciones que usan EWS.</span><span class="sxs-lookup"><span data-stu-id="969e2-138">The following table lists the throttling policy parameters that affect applications that use EWS.</span></span>

<span data-ttu-id="969e2-139">**Tabla 1: parámetros de la Directiva de limitación que afectan a EWS**</span><span class="sxs-lookup"><span data-stu-id="969e2-139">**Table 1: Throttling policy parameters that affect EWS**</span></span>

|<span data-ttu-id="969e2-140">**Nombre del parámetro de la Directiva de limitación**</span><span class="sxs-lookup"><span data-stu-id="969e2-140">**Throttling policy parameter name**</span></span>|<span data-ttu-id="969e2-141">**Se aplica a**</span><span class="sxs-lookup"><span data-stu-id="969e2-141">**Applies to**</span></span>|<span data-ttu-id="969e2-142">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="969e2-142">**Description**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="969e2-143">**DiscoveryMaxConcurrency**</span><span class="sxs-lookup"><span data-stu-id="969e2-143">**DiscoveryMaxConcurrency**</span></span> <br/> |<span data-ttu-id="969e2-144">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-144">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-145">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-145">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-146">Especifica el número de conexiones de búsqueda de detección simultáneas que un usuario puede realizar a la vez.</span><span class="sxs-lookup"><span data-stu-id="969e2-146">Specifies the number of concurrent discovery search connections that a user can have at the same time.</span></span>  <br/> |
|<span data-ttu-id="969e2-147">**DiscoveryMaxKeywords**</span><span class="sxs-lookup"><span data-stu-id="969e2-147">**DiscoveryMaxKeywords**</span></span> <br/> |<span data-ttu-id="969e2-148">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-148">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-149">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-149">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-150">Especifica el número máximo de palabras clave que un usuario puede incluir en una búsqueda de detección.</span><span class="sxs-lookup"><span data-stu-id="969e2-150">Specifies the maximum number of keywords that a user can include in a discovery search.</span></span>  <br/> |
|<span data-ttu-id="969e2-151">**DiscoveryMaxKeywordsPerPage**</span><span class="sxs-lookup"><span data-stu-id="969e2-151">**DiscoveryMaxKeywordsPerPage**</span></span> <br/> |<span data-ttu-id="969e2-152">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-152">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-153">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-153">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-154">Especifica el número de palabras clave para las que se deben mostrar estadísticas.</span><span class="sxs-lookup"><span data-stu-id="969e2-154">Specifies the number of keywords for which to show statistics.</span></span>  <br/> |
|<span data-ttu-id="969e2-155">**DiscoveryMaxMailboxes**</span><span class="sxs-lookup"><span data-stu-id="969e2-155">**DiscoveryMaxMailboxes**</span></span> <br/> |<span data-ttu-id="969e2-156">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-156">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-157">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-157">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-158">Especifica el número máximo de buzones de origen que un usuario puede incluir en una búsqueda de detección.</span><span class="sxs-lookup"><span data-stu-id="969e2-158">Specifies the maximum number of source mailboxes that a user can include in a discovery search.</span></span>  <br/> |
|<span data-ttu-id="969e2-159">**DiscoveryMaxMailboxesResultsOnly**</span><span class="sxs-lookup"><span data-stu-id="969e2-159">**DiscoveryMaxMailboxesResultsOnly**</span></span> <br/> |<span data-ttu-id="969e2-160">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-160">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-161">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-161">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-162">Especifica el número máximo de buzones que puede buscar en una búsqueda de exhibición de documentos electrónicos local sin que sea posible ver las estadísticas.</span><span class="sxs-lookup"><span data-stu-id="969e2-162">Specifies the maximum number of mailboxes you can search in an In-Place eDiscovery search without being able to view the statistics.</span></span>  <br/> |
|<span data-ttu-id="969e2-163">**DiscoveryPreviewSearchResultsPageSize**</span><span class="sxs-lookup"><span data-stu-id="969e2-163">**DiscoveryPreviewSearchResultsPageSize**</span></span> <br/> |<span data-ttu-id="969e2-164">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-164">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-165">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-165">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-166">Especifica el número de mensajes devueltos en una respuesta de vista previa de búsqueda de exhibición de documentos electrónicos.</span><span class="sxs-lookup"><span data-stu-id="969e2-166">Specifies the number of messages returned in a eDiscovery search preview response.</span></span>  <br/> |
|<span data-ttu-id="969e2-167">**EwsCutoffBalance**</span><span class="sxs-lookup"><span data-stu-id="969e2-167">**EwsCutoffBalance**</span></span> <br/> |<span data-ttu-id="969e2-168">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-168">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-169">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-169">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-170">Define los límites de consumo de recursos para el usuario de EWS antes de bloquearlo completamente a fin de realizar operaciones en un componente específico.</span><span class="sxs-lookup"><span data-stu-id="969e2-170">Defines the resource consumption limits for EWS user before that user is completely blocked from performing operations on a specific component.</span></span>  <br/> |
|<span data-ttu-id="969e2-171">**EwsMaxBurst**</span><span class="sxs-lookup"><span data-stu-id="969e2-171">**EwsMaxBurst**</span></span> <br/> |<span data-ttu-id="969e2-172">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-172">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-173">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-173">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-174">Define la cantidad de tiempo que un usuario de EWS puede consumir una cantidad elevada de recursos antes de limitarse.</span><span class="sxs-lookup"><span data-stu-id="969e2-174">Defines the amount of time that an EWS user can consume an elevated amount of resources before being throttled.</span></span> <span data-ttu-id="969e2-175">Este valor se mide en milisegundos.</span><span class="sxs-lookup"><span data-stu-id="969e2-175">This is measured in milliseconds.</span></span> <span data-ttu-id="969e2-176">y se establece por separado para cada componente.</span><span class="sxs-lookup"><span data-stu-id="969e2-176">This value is set separately for each component.</span></span>  <br/> |
|<span data-ttu-id="969e2-177">**EwsRechargeRate**</span><span class="sxs-lookup"><span data-stu-id="969e2-177">**EwsRechargeRate**</span></span> <br/> |<span data-ttu-id="969e2-178">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-178">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-179">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-179">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-180">Define la velocidad con la que se vuelve a cargar el presupuesto de un usuario de EWS (el presupuesto aumenta) durante el tiempo de duración del presupuesto.</span><span class="sxs-lookup"><span data-stu-id="969e2-180">Defines the rate at which an EWS user's budget is recharged (budget grows by) during the budget time.</span></span>  <br/> |
|<span data-ttu-id="969e2-181">**EWSMaxSubscriptions**</span><span class="sxs-lookup"><span data-stu-id="969e2-181">**EWSMaxSubscriptions**</span></span> <br/> |<span data-ttu-id="969e2-182">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-182">Exchange 2010</span></span>  <br/> <span data-ttu-id="969e2-183">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-183">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-184">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-184">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-185">Define el número máximo de suscripciones de notificación de inserción, extracción y transmisión activas que un usuario puede tener en un servidor de acceso de cliente específico al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="969e2-185">Defines the maximum number of active push, pull, and streaming notification subscriptions that a user can have on a specific Client Access server at one time.</span></span> <span data-ttu-id="969e2-186">Esta se ha presupuestado de forma diferente para diferentes versiones de Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-186">This is budgeted differently for different Exchange versions.</span></span>  <br/> |
|<span data-ttu-id="969e2-187">**EWSFastSearchTimeoutInSeconds**</span><span class="sxs-lookup"><span data-stu-id="969e2-187">**EWSFastSearchTimeoutInSeconds**</span></span> <br/> |<span data-ttu-id="969e2-188">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-188">Exchange 2010</span></span>  <br/> |<span data-ttu-id="969e2-189">Define la cantidad de tiempo en segundos que las búsquedas rápidas realizadas mediante la búsqueda de Exchange en EWS continúan antes de que se agote el tiempo de espera. Las búsquedas rápidas son búsquedas realizadas mediante una cadena de consulta de sintaxis de consulta avanzada (AQS) en una [operación FindItem](https://msdn.microsoft.com/library/ebad6aae-16e7-44de-ae63-a95b24539729%28Office.15%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="969e2-189">Defines the amount of time in seconds that fast searches made by using Exchange Search in EWS continue before they time out. Fast searches are searches made by using an Advanced Query Syntax (AQS) query string in a [FindItem operation](https://msdn.microsoft.com/library/ebad6aae-16e7-44de-ae63-a95b24539729%28Office.15%29.aspx).</span></span>  <br/> |
|<span data-ttu-id="969e2-190">**EWSFindCountLimit**</span><span class="sxs-lookup"><span data-stu-id="969e2-190">**EWSFindCountLimit**</span></span> <br/> |<span data-ttu-id="969e2-191">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-191">Exchange 2010</span></span>  <br/> <span data-ttu-id="969e2-192">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-192">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-193">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-193">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-194">Define el número máximo de elementos desde una operación [FindItem](https://msdn.microsoft.com/library/ebad6aae-16e7-44de-ae63-a95b24539729%28Office.15%29.aspx) o [FindFolder](https://msdn.microsoft.com/library/7a9855aa-06cc-45ba-ad2a-645c15b7d031%28Office.15%29.aspx) que puede haber en la memoria del servidor de acceso de cliente al mismo tiempo para un usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-194">Defines the maximum number of items from a [FindItem operation](https://msdn.microsoft.com/library/ebad6aae-16e7-44de-ae63-a95b24539729%28Office.15%29.aspx) or [FindFolder operation](https://msdn.microsoft.com/library/7a9855aa-06cc-45ba-ad2a-645c15b7d031%28Office.15%29.aspx) that can exist in memory on the Client Access server at one time for one user.</span></span> <span data-ttu-id="969e2-195">El valor predeterminado de esta propiedad es 1000.</span><span class="sxs-lookup"><span data-stu-id="969e2-195">The default value for this property is 1000.</span></span> <span data-ttu-id="969e2-196">El [valor de retroceso](https://technet.microsoft.com/library/dd297964%28v=exchg.141%29.aspx#fallback)para este valor es 1000.</span><span class="sxs-lookup"><span data-stu-id="969e2-196">The [fallback value](https://technet.microsoft.com/library/dd297964%28v=exchg.141%29.aspx#fallback)for this value is 1000.</span></span>  <br/> <span data-ttu-id="969e2-197">En Exchange Online y versiones locales de Exchange a partir de Exchange 2013, un cmdlet no puede consultar ni configurar esta directiva de limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-197">In Exchange Online and on-premises versions of Exchange starting with Exchange 2013, this throttling policy cannot be queried or configured by a cmdlet.</span></span> <span data-ttu-id="969e2-198">En Exchange Online y versiones locales de Exchange a partir de Exchange 2013, la EWSFindCountLimit para la [búsqueda de AQS](how-to-perform-an-aqs-search-by-using-ews-in-exchange.md) y cualquier búsqueda de Exchange con una restricción es de 250 resultados.</span><span class="sxs-lookup"><span data-stu-id="969e2-198">In Exchange Online and on-premises versions of Exchange starting with Exchange 2013, the EWSFindCountLimit for [AQS search](how-to-perform-an-aqs-search-by-using-ews-in-exchange.md) and any Exchange search with a restriction is 250 results.</span></span> <span data-ttu-id="969e2-199">Una búsqueda de Exchange sin una restricción devolverá hasta 1000 resultados.</span><span class="sxs-lookup"><span data-stu-id="969e2-199">An Exchange search without a restriction will return up to 1000 results.</span></span>  <br/> |
|<span data-ttu-id="969e2-200">**EWSPercentTimeInAD**</span><span class="sxs-lookup"><span data-stu-id="969e2-200">**EWSPercentTimeInAD**</span></span> <br/> |<span data-ttu-id="969e2-201">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-201">Exchange 2010</span></span>  <br/> |<span data-ttu-id="969e2-202">Define el porcentaje de tiempo por minuto durante el cual un usuario específico puede ejecutar solicitudes de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="969e2-202">Defines the percentage of time per minute during which a specific user can execute Active Directory requests.</span></span>  <br/> |
|<span data-ttu-id="969e2-203">**EWSPercentTimeInCAS**</span><span class="sxs-lookup"><span data-stu-id="969e2-203">**EWSPercentTimeInCAS**</span></span> <br/> |<span data-ttu-id="969e2-204">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-204">Exchange 2010</span></span>  <br/> |<span data-ttu-id="969e2-205">Define el porcentaje de tiempo por minuto durante el cual un usuario específico puede ejecutar el código del servidor de acceso de cliente.</span><span class="sxs-lookup"><span data-stu-id="969e2-205">Defines the percentage of time per minute during which a specific user can execute Client Access server code.</span></span>  <br/> |
|<span data-ttu-id="969e2-206">**EWSPercentTimeInMailboxRPC**</span><span class="sxs-lookup"><span data-stu-id="969e2-206">**EWSPercentTimeInMailboxRPC**</span></span> <br/> |<span data-ttu-id="969e2-207">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-207">Exchange 2010</span></span>  <br/> |<span data-ttu-id="969e2-208">Define el porcentaje de tiempo por minuto durante el cual un usuario específico puede ejecutar solicitudes RPC de buzón de correo.</span><span class="sxs-lookup"><span data-stu-id="969e2-208">Defines the percentage of time per minute during which a specific user can execute mailbox RPC requests</span></span>  <br/> |
|<span data-ttu-id="969e2-209">**EWSMaxConcurrency**</span><span class="sxs-lookup"><span data-stu-id="969e2-209">**EWSMaxConcurrency**</span></span> <br/> |<span data-ttu-id="969e2-210">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-210">Exchange 2010</span></span>  <br/> <span data-ttu-id="969e2-211">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-211">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-212">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-212">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-213">Define el número de conexiones abiertas simultáneas que un usuario específico puede tener en un servidor de Exchange que usa EWS al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="969e2-213">Defines the number of concurrent open connections that a specific user can have against an Exchange server that is using EWS at one time.</span></span> <span data-ttu-id="969e2-214">El valor predeterminado de Exchange 2010 es 10.</span><span class="sxs-lookup"><span data-stu-id="969e2-214">The default value for Exchange 2010 is 10.</span></span> <span data-ttu-id="969e2-215">El valor predeterminado de Exchange 2013 y Exchange Online es 27.</span><span class="sxs-lookup"><span data-stu-id="969e2-215">The default value for Exchange 2013 and Exchange Online is 27.</span></span>  <br/> <span data-ttu-id="969e2-216">Esta Directiva se aplica a todas las operaciones excepto para las notificaciones de streaming.</span><span class="sxs-lookup"><span data-stu-id="969e2-216">This policy applies to all operations except for streaming notifications.</span></span> <span data-ttu-id="969e2-217">Las notificaciones de streaming usan el **HangingConnectionLimit** para indicar el número de conexiones de eventos de transmisión de apertura que están disponibles.</span><span class="sxs-lookup"><span data-stu-id="969e2-217">Streaming notifications use the **HangingConnectionLimit** to indicate the number of open streaming event connections that are available.</span></span> <span data-ttu-id="969e2-218">Para obtener más información, vea [¿qué valores de limitación se deben tener en cuenta?](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling).</span><span class="sxs-lookup"><span data-stu-id="969e2-218">For more information, see [What throttling values do I need to take into consideration?](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling).</span></span>  <br/> |
|<span data-ttu-id="969e2-219">**MessageRateLimit**</span><span class="sxs-lookup"><span data-stu-id="969e2-219">**MessageRateLimit**</span></span> <br/> |<span data-ttu-id="969e2-220">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-220">Exchange 2010</span></span>  <br/> <span data-ttu-id="969e2-221">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-221">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-222">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-222">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-223">Define el número de mensajes por minuto que se puede enviar.</span><span class="sxs-lookup"><span data-stu-id="969e2-223">Defines the number of messages per minute that can be submitted.</span></span>  <br/> |
|<span data-ttu-id="969e2-224">**RecipientRateLimit**</span><span class="sxs-lookup"><span data-stu-id="969e2-224">**RecipientRateLimit**</span></span> <br/> |<span data-ttu-id="969e2-225">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-225">Exchange 2010</span></span>  <br/> <span data-ttu-id="969e2-226">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-226">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-227">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-227">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-228">Define el límite para el número de destinatarios que un usuario puede direccionar en un período de 24 horas.</span><span class="sxs-lookup"><span data-stu-id="969e2-228">Defines the limit to the number of recipients that a user can address in a 24-hour period.</span></span>  <br/> |
|<span data-ttu-id="969e2-229">**ForwardeeLimit**</span><span class="sxs-lookup"><span data-stu-id="969e2-229">**ForwardeeLimit**</span></span> <br/> |<span data-ttu-id="969e2-230">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-230">Exchange 2010</span></span>  <br/> <span data-ttu-id="969e2-231">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-231">Exchange 2013</span></span>  <br/> <span data-ttu-id="969e2-232">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-232">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-233">Define el límite para el número de destinatarios de las acciones de redirección y redireccionamiento de la bandeja de entrada en un período de 24 horas.</span><span class="sxs-lookup"><span data-stu-id="969e2-233">Defines the limit to the number of recipients for Inbox forward/redirect actions in a 24-hour period.</span></span>  <br/> |
|<span data-ttu-id="969e2-234">**ConcurrentSyncCalls**</span><span class="sxs-lookup"><span data-stu-id="969e2-234">**ConcurrentSyncCalls**</span></span> <br/> |<span data-ttu-id="969e2-235">Exchange 2019</span><span class="sxs-lookup"><span data-stu-id="969e2-235">Exchange 2019</span></span>  <br/> <span data-ttu-id="969e2-236">Exchange 2016</span><span class="sxs-lookup"><span data-stu-id="969e2-236">Exchange 2016</span></span>  <br/> <span data-ttu-id="969e2-237">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-237">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-238">Define el límite para el número de llamadas de sincronización simultáneas (SyncFolderHierarchy, SyncFolderItems) para un usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-238">Defines the limit to the number of concurrent sync calls (SyncFolderHierarchy, SyncFolderItems) for a user.</span></span> <br/> |

> [!CAUTION]
> <span data-ttu-id="969e2-239">No establezca las directivas de limitación en **null**.</span><span class="sxs-lookup"><span data-stu-id="969e2-239">Do not set throttling polices to **null**.</span></span> <span data-ttu-id="969e2-240">Esto establecerá que la Directiva sea igual a ilimitada, lo que indica que no se ha establecido una directiva de limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-240">This will set the policy to equal unlimited, which indicates that a throttling policy isn't set.</span></span>

## <a name="displaying-the-policies-that-apply-to-exchange-mailboxes"></a><span data-ttu-id="969e2-241">Visualización de las directivas que se aplican a los buzones de Exchange</span><span class="sxs-lookup"><span data-stu-id="969e2-241">Displaying the policies that apply to Exchange mailboxes</span></span>

<span data-ttu-id="969e2-242">Exchange local proporciona los cmdlets del shell de administración de Exchange que puede usar para establecer y obtener la Directiva de limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-242">Exchange on-premises provides Exchange Management Shell cmdlets that you can use to set and get throttling policy.</span></span> <span data-ttu-id="969e2-243">Exchange online no proporciona acceso a los cmdlets de la Directiva de limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-243">Exchange Online does not provide access to the throttling policy cmdlets.</span></span>

<span data-ttu-id="969e2-244">Puede usar los siguientes cmdlets para mostrar las directivas de limitación de peticiones para una implementación local de Exchange Server:</span><span class="sxs-lookup"><span data-stu-id="969e2-244">You can use the following cmdlets to display throttling polices for an on-premises Exchange Server deployment:</span></span>

- <span data-ttu-id="969e2-245">**Get-ThrottlingPolicy** : obtiene la configuración de limitación de clientes para una o más directivas de limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-245">**Get-ThrottlingPolicy** — Gets the client throttling settings for one or more throttling policies.</span></span> <span data-ttu-id="969e2-246">Para obtener más información, vea [Get-ThrottlingPolicy](https://technet.microsoft.com/library/dd351264.aspx) en TechNet.</span><span class="sxs-lookup"><span data-stu-id="969e2-246">For more information, see [Get-ThrottlingPolicy](https://technet.microsoft.com/library/dd351264.aspx) on TechNet.</span></span>

- <span data-ttu-id="969e2-247">**Get-ThrottlingPolicyAssociation** : permite ver la relación entre un objeto y sus directivas de limitación asociadas.</span><span class="sxs-lookup"><span data-stu-id="969e2-247">**Get-ThrottlingPolicyAssociation** — Enables you to view the relationship between an object and its associated throttling policies.</span></span> <span data-ttu-id="969e2-248">El objeto puede ser un usuario con un buzón, un usuario sin buzón o un contacto.</span><span class="sxs-lookup"><span data-stu-id="969e2-248">The object can be a user with a mailbox, a user without a mailbox, or a contact.</span></span> <span data-ttu-id="969e2-249">Para obtener más información, vea [Get-ThrottlingPolicyAssociation](https://technet.microsoft.com/library/ff459241.aspx) en TechNet.</span><span class="sxs-lookup"><span data-stu-id="969e2-249">For more information, see [Get-ThrottlingPolicyAssociation](https://technet.microsoft.com/library/ff459241.aspx) on TechNet.</span></span>

<span data-ttu-id="969e2-250">Use el siguiente comando para mostrar la Directiva de limitación predeterminada para Exchange 2010.</span><span class="sxs-lookup"><span data-stu-id="969e2-250">Use the following command to show the default throttling policy for Exchange 2010.</span></span>

<span data-ttu-id="969e2-251">**Get-ThrottlingPolicy | Where-Object {$ _. IsDefault-EQ "true"} | Format-List**</span><span class="sxs-lookup"><span data-stu-id="969e2-251">**Get-ThrottlingPolicy | Where-Object {$_.IsDefault -eq "True"} | format-list**</span></span>

<span data-ttu-id="969e2-252">Use el siguiente comando para mostrar la Directiva de limitación global (que equivale a la Directiva de limitación predeterminada en Exchange 2010) en Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="969e2-252">Use the following command to show the global throttling policy (which equates to the default throttling policy in Exchange 2010) in Exchange 2013.</span></span>

<span data-ttu-id="969e2-253">**Get-ThrottlingPolicy | Where-Object {$ _. ThrottlingPolicyScope-EQ "global"} | Format-List**</span><span class="sxs-lookup"><span data-stu-id="969e2-253">**Get-ThrottlingPolicy | Where-Object {$_.ThrottlingPolicyScope -eq "Global"} | format-list**</span></span>

<span data-ttu-id="969e2-254">Use el siguiente comando para mostrar la Directiva de limitación de peticiones asociada a un usuario en Exchange 2010 o Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="969e2-254">Use the following command to show the throttling policy associated with a user in Exchange 2010 or Exchange 2013.</span></span> <span data-ttu-id="969e2-255">Reemplace el nombre de usuario john@contoso.com por el nombre de usuario del usuario de destino para el que desea obtener información sobre la Directiva de limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-255">Replace the user name john@contoso.com with the user name of the target user for whom you want to get throttling policy information.</span></span>

<span data-ttu-id="969e2-256">**Get-ThrottlingPolicyAssociation john@contoso.com | Format-List**</span><span class="sxs-lookup"><span data-stu-id="969e2-256">**Get-ThrottlingPolicyAssociation john@contoso.com | format-list**</span></span>

<span data-ttu-id="969e2-257">Al ejecutar este comando en el shell de administración de Exchange, se obtiene una salida similar a la siguiente.</span><span class="sxs-lookup"><span data-stu-id="969e2-257">Running this command in Exchange Management Shell results in an output similar to the following.</span></span>

```powershell
PS C:\>Get-ThrottlingPolicyAssociation john@contoso.com
RunspaceId               : 72153d6-9dce-2fae-8dbd-5ca5f760g2df
ObjectId                 : john
ThrottlingPolicyId       :
Name                     : john
Identity                 : FHXB-28178dom.contoso.com/Users/john
IsValid                  : True
NeedsToSuppressPii       : False
ExchangeVersion          : 0.10 (15.0.0.0)
DistinguishedName        : CN=john,CN=Users,DC=FHXB-28178dom,DC=contoso,DC=com
Guid                     : 2c10dab6-de28-1937-ad8g-535832613a08
```

> [!NOTE]
> <span data-ttu-id="969e2-258">Cuando la propiedad **ThrottlingPolicyId** está en blanco, se aplica la directiva predeterminada al buzón.</span><span class="sxs-lookup"><span data-stu-id="969e2-258">When the **ThrottlingPolicyId** property is blank, the default policy is applied to the mailbox.</span></span>

<span data-ttu-id="969e2-259">Puede establecer la Directiva de limitación en un servidor de Exchange mediante los cmdlets [set-ThrottlingPolicy](https://technet.microsoft.com/library/dd298094.aspx) y [set-ThrottlingPolicyAssociation](https://technet.microsoft.com/library/ff459231.aspx) .</span><span class="sxs-lookup"><span data-stu-id="969e2-259">You can set throttling policy on an Exchange server by using the [Set-ThrottlingPolicy](https://technet.microsoft.com/library/dd298094.aspx) and [Set-ThrottlingPolicyAssociation](https://technet.microsoft.com/library/ff459231.aspx) cmdlets.</span></span> <span data-ttu-id="969e2-260">Puede crear y quitar directivas de limitación no predeterminadas con los cmdlets [New-ThrottlingPolicy](https://technet.microsoft.com/library/dd351045.aspx) y [Remove-ThrottlingPolicy](https://technet.microsoft.com/library/dd351178.aspx) .</span><span class="sxs-lookup"><span data-stu-id="969e2-260">You can create and remove non-default throttling policies by using the [New-ThrottlingPolicy](https://technet.microsoft.com/library/dd351045.aspx) and [Remove-ThrottlingPolicy](https://technet.microsoft.com/library/dd351178.aspx) cmdlets.</span></span>

> [!TIP]
> <span data-ttu-id="969e2-261">Le recomendamos que diseñe sus aplicaciones para que cumplan la Directiva de limitación de peticiones predeterminada.</span><span class="sxs-lookup"><span data-stu-id="969e2-261">We recommend that you design your applications to adhere to the default throttling policy.</span></span> <span data-ttu-id="969e2-262">Solo realice cambios en las directivas de limitación predeterminadas si el diseño de la aplicación cliente no puede acomodar la directiva predeterminada.</span><span class="sxs-lookup"><span data-stu-id="969e2-262">Only make changes to default throttling policies if your client application design cannot accommodate the default policy.</span></span> <span data-ttu-id="969e2-263">Tenga en cuenta que las directivas de limitación menos restrictivas pueden afectar negativamente la confiabilidad del servicio.</span><span class="sxs-lookup"><span data-stu-id="969e2-263">Be aware that less restrictive throttling policies can negatively affect service reliability.</span></span>

## <a name="throttling-considerations-for-applications-that-use-ews-impersonation"></a><span data-ttu-id="969e2-264">Consideraciones de limitación para las aplicaciones que usan la suplantación de EWS</span><span class="sxs-lookup"><span data-stu-id="969e2-264">Throttling considerations for applications that use EWS impersonation</span></span>

<span data-ttu-id="969e2-265">La [suplantación](impersonation-and-ews-in-exchange.md) es un método de autorización que permite que una única cuenta tenga acceso a muchas cuentas.</span><span class="sxs-lookup"><span data-stu-id="969e2-265">[Impersonation](impersonation-and-ews-in-exchange.md) is an authorization method that enables a single account to access many accounts.</span></span> <span data-ttu-id="969e2-266">Cuando una cuenta de servicio suplanta a los usuarios, actúa como los usuarios y, por lo tanto, asume los derechos asignados a dichos usuarios.</span><span class="sxs-lookup"><span data-stu-id="969e2-266">When a service account impersonates users, it acts as the users and therefore assumes the rights that are assigned to those users.</span></span> <span data-ttu-id="969e2-267">Los archivos de registro registran el acceso como usuario suplantado.</span><span class="sxs-lookup"><span data-stu-id="969e2-267">Log files record the access as the impersonated user.</span></span> <span data-ttu-id="969e2-268">Los administradores usan el control de acceso basado en roles (RBAC) para configurar la suplantación a través del shell de administración de Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-268">Administrators use role-based access control (RBAC) to configure impersonation via the Exchange Management Shell.</span></span>

<span data-ttu-id="969e2-269">Cuando se usa la suplantación, los presupuestos de todos los umbrales de limitación se aplican de forma diferente en función de la versión de Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-269">When impersonation is used, the budgets for all the throttling thresholds apply differently depending on the version of Exchange.</span></span> <span data-ttu-id="969e2-270">El presupuesto se calcula en función de la cuenta que se suplanta, o bien de la cuenta de servicio.</span><span class="sxs-lookup"><span data-stu-id="969e2-270">The budget is either calculated against the account that is impersonated, or the service account.</span></span> <span data-ttu-id="969e2-271">Si la aplicación es multiproceso y realiza solicitudes simultáneas en varios buzones, debe tener en cuenta cómo el umbral de limitación afectará al rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="969e2-271">If your application is multi-threaded and makes concurrent requests against multiple mailboxes, you should consider how the throttling threshold will affect your application's performance.</span></span> <span data-ttu-id="969e2-272">En general, tenga en cuenta los siguientes límites en las cuentas de servicio al crear una aplicación basada en servicios que use la suplantación para obtener acceso a todos los buzones de correo:</span><span class="sxs-lookup"><span data-stu-id="969e2-272">In general, be aware of the following limits on service accounts when you create a service-based application that uses impersonation to access all mailboxes:</span></span>

- <span data-ttu-id="969e2-273">Cuando se usa la suplantación, la cuenta de servicio tiene un presupuesto independiente para los siguientes parámetros de directiva:</span><span class="sxs-lookup"><span data-stu-id="969e2-273">When you use Impersonation, the service account has a separate budget for the following policy parameters:</span></span>

  - <span data-ttu-id="969e2-274">**EWSMaxConcurrency**</span><span class="sxs-lookup"><span data-stu-id="969e2-274">**EWSMaxConcurrency**</span></span>

  - <span data-ttu-id="969e2-275">**EWSPercentTimeInAD**</span><span class="sxs-lookup"><span data-stu-id="969e2-275">**EWSPercentTimeInAD**</span></span>

  - <span data-ttu-id="969e2-276">**EWSPercentTimeInCAS**</span><span class="sxs-lookup"><span data-stu-id="969e2-276">**EWSPercentTimeInCAS**</span></span>

  - <span data-ttu-id="969e2-277">**EWSPercentTimeInMailboxRPC**</span><span class="sxs-lookup"><span data-stu-id="969e2-277">**EWSPercentTimeInMailboxRPC**</span></span>

  - <span data-ttu-id="969e2-278">**EWSMaxSubscriptions**</span><span class="sxs-lookup"><span data-stu-id="969e2-278">**EWSMaxSubscriptions**</span></span>

  - <span data-ttu-id="969e2-279">**EWSFastSearchTimeoutInSeconds**</span><span class="sxs-lookup"><span data-stu-id="969e2-279">**EWSFastSearchTimeoutInSeconds**</span></span>

  - <span data-ttu-id="969e2-280">**EWSFindCountLimit**</span><span class="sxs-lookup"><span data-stu-id="969e2-280">**EWSFindCountLimit**</span></span>

- <span data-ttu-id="969e2-281">El presupuesto de **EWSMaxConcurrency** se comparte para la cuenta de servicio y la cuenta que se suplanta para todas las conexiones a las versiones de Exchange anteriores a Exchange 2010 Service Pack 2 (SP2) paquete acumulativo de actualizaciones 4 (RU4).</span><span class="sxs-lookup"><span data-stu-id="969e2-281">The **EWSMaxConcurrency** budget is shared for the service account and the account being impersonated for all connections to versions of Exchange earlier than Exchange 2010 Service Pack 2 (SP2) Update Rollup 4 (RU4).</span></span> <span data-ttu-id="969e2-282">A partir de Exchange 2010 SP2 RU4 e incluir Exchange Online, el acceso a la cuenta de servicio usa un presupuesto independiente del presupuesto de **EWSMaxConcurrency** de usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-282">Starting with Exchange 2010 SP2 RU4, and including Exchange Online, the service account access uses a separate budget from the user **EWSMaxConcurrency** budget.</span></span> <span data-ttu-id="969e2-283">Para obtener más información acerca de la actualización de la Directiva de limitación de conexiones simultáneas de Exchange para EWS, consulte [Descripción del paquete acumulativo de actualizaciones 4 para Exchange Server 2010 Service Pack 2](https://support.microsoft.com/kb/2706690).</span><span class="sxs-lookup"><span data-stu-id="969e2-283">For more information about the update to the Exchange concurrent connection throttling policy for EWS, see [Description of Update Rollup 4 for Exchange Server 2010 Service Pack 2](https://support.microsoft.com/kb/2706690).</span></span>

    <span data-ttu-id="969e2-284">Las notificaciones de streaming de EWS en versiones de Exchange a partir de Exchange 2010 e incluyen Exchange Online, tienen un presupuesto **EWSMaxConcurrency** clonado adicional desde el resto de conexiones de cliente de EWS.</span><span class="sxs-lookup"><span data-stu-id="969e2-284">EWS streaming notifications in versions of Exchange starting with Exchange 2010, and including Exchange Online, have an additional cloned **EWSMaxConcurrency** budget from all other EWS client connections.</span></span> <span data-ttu-id="969e2-285">Las conexiones de notificación de transmisión por secuencias se cuentan con un presupuesto independiente que todas las demás operaciones de EWS.</span><span class="sxs-lookup"><span data-stu-id="969e2-285">Streaming notification connections are counted against a separate budget than all other EWS operations.</span></span> <span data-ttu-id="969e2-286">El presupuesto de simultaneidad máximo de la notificación de transmisión por secuencias es, en realidad, dos presupuestos distintos: un presupuesto es para todas las cuentas de servicio y un presupuesto para la cuenta que se va a suplantar.</span><span class="sxs-lookup"><span data-stu-id="969e2-286">The streaming notification maximum concurrency budget is actually two different budgets: one budget is for all service accounts, and one budget is for the account being impersonated.</span></span> <span data-ttu-id="969e2-287">Las notificaciones de streaming en Exchange Online y las versiones de Exchange a partir de Exchange 2013 usan [HangingConnectionLimit](#throttling-considerations-for-ews-notification-applications) para limitar el número de conexiones.</span><span class="sxs-lookup"><span data-stu-id="969e2-287">Streaming notifications in Exchange Online and versions of Exchange starting with Exchange 2013 use the [HangingConnectionLimit](#throttling-considerations-for-ews-notification-applications) to limit the number of connections.</span></span>

    <span data-ttu-id="969e2-288">Por ejemplo, supongamos que **EWSMaxConcurrency** es igual a cinco.</span><span class="sxs-lookup"><span data-stu-id="969e2-288">For example, let's assume that **EWSMaxConcurrency** is equal to five.</span></span> <span data-ttu-id="969e2-289">Un usuario puede tener cinco conexiones de notificación de extracción abiertas, mientras que una cuenta de servicio puede tener cinco conexiones de notificación de extracción simultáneas en el buzón del usuario al mismo tiempo que el usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-289">A user can have five open pull notification connections, while an service account can have five concurrent pull notification connections against the user's mailbox at the same time as the user.</span></span>

- <span data-ttu-id="969e2-290">En la siguiente tabla se identifica cómo se calculan los presupuestos de limitación de **EWSMaxSubscriptions** entre la cuenta de servicio y la cuenta que se va a suplantar.</span><span class="sxs-lookup"><span data-stu-id="969e2-290">The following table identifies how **EWSMaxSubscriptions** throttling budgets are calculated between the service account and the account to impersonate.</span></span>

   <span data-ttu-id="969e2-291">**Tabla 2: contabilidad del presupuesto de EWSMaxSubscriptions**</span><span class="sxs-lookup"><span data-stu-id="969e2-291">**Table 2: EWSMaxSubscriptions budget accounting**</span></span>

   |<span data-ttu-id="969e2-292">**Versión de Exchange**</span><span class="sxs-lookup"><span data-stu-id="969e2-292">**Exchange version**</span></span>|<span data-ttu-id="969e2-293">**EWSMaxSubscriptions la Contabilidad presupuestaria del límite**</span><span class="sxs-lookup"><span data-stu-id="969e2-293">**EWSMaxSubscriptions throttling budget accounting**</span></span>|
   |:-----|:-----|
   |<span data-ttu-id="969e2-294">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="969e2-294">Exchange Online</span></span>  <br/> |<span data-ttu-id="969e2-295">Se carga en el buzón de correo de destino.</span><span class="sxs-lookup"><span data-stu-id="969e2-295">Charged against the target mailbox.</span></span>  <br/> |
   |<span data-ttu-id="969e2-296">Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="969e2-296">Exchange 2013</span></span>  <br/> |<span data-ttu-id="969e2-297">Se carga en el buzón de correo de destino.</span><span class="sxs-lookup"><span data-stu-id="969e2-297">Charged against the target mailbox.</span></span>  <br/> |
   |<span data-ttu-id="969e2-298">Exchange 2010 SP3</span><span class="sxs-lookup"><span data-stu-id="969e2-298">Exchange 2010 SP3</span></span>  <br/> |<span data-ttu-id="969e2-299">Se carga en el buzón de correo de destino.</span><span class="sxs-lookup"><span data-stu-id="969e2-299">Charged against the target mailbox.</span></span>  <br/> |
   |<span data-ttu-id="969e2-300">Exchange 2010 SP2</span><span class="sxs-lookup"><span data-stu-id="969e2-300">Exchange 2010 SP2</span></span>  <br/> |<span data-ttu-id="969e2-301">Se cargan en la cuenta de llamada.</span><span class="sxs-lookup"><span data-stu-id="969e2-301">Charged against the calling account.</span></span> <span data-ttu-id="969e2-302">A partir de Exchange 2010 SP2 RU4, el presupuesto se carga en el buzón de correo de destino.</span><span class="sxs-lookup"><span data-stu-id="969e2-302">Starting with Exchange 2010 SP2 RU4, the budget is charged against the target mailbox.</span></span>  <br/> |
   |<span data-ttu-id="969e2-303">Exchange 2010 SP1</span><span class="sxs-lookup"><span data-stu-id="969e2-303">Exchange 2010 SP1</span></span>  <br/> |<span data-ttu-id="969e2-304">Se cargan en la cuenta de llamada.</span><span class="sxs-lookup"><span data-stu-id="969e2-304">Charged against the calling account.</span></span>  <br/> |
   |<span data-ttu-id="969e2-305">Exchange 2010</span><span class="sxs-lookup"><span data-stu-id="969e2-305">Exchange 2010</span></span>  <br/> |<span data-ttu-id="969e2-306">Se cargan en la cuenta de llamada.</span><span class="sxs-lookup"><span data-stu-id="969e2-306">Charged against the calling account.</span></span>  <br/> |

- <span data-ttu-id="969e2-307">Debido a que el presupuesto de limitación de **EWSMaxSubscriptions** se carga en la cuenta que se suplanta, no hay ningún límite en el número de buzones a los que puede suscribir y recibir notificaciones de transmisión por secuencias una cuenta de servicio, siempre que se use la suplantación.</span><span class="sxs-lookup"><span data-stu-id="969e2-307">Because the **EWSMaxSubscriptions** throttling budget is charged against the account being impersonated, there is no limit on the number of mailboxes a service account can subscribe to and receive streaming notifications for, as long as impersonation is being used.</span></span> <span data-ttu-id="969e2-308">Para la cuenta que se va a suplantar, no puede tener más de _n_ solicitudes simultáneas por buzón de correo de destino, donde _n_ es el valor de **EWSMaxSubscriptions** .</span><span class="sxs-lookup"><span data-stu-id="969e2-308">For the account being impersonated, you can't have more than  _n_ concurrent requests per target mailbox, where  _n_ is the **EWSMaxSubscriptions** value.</span></span> <span data-ttu-id="969e2-309">Si no estaba usando la suplantación, la misma cuenta de servicio no podría tener más de _n_ total de solicitudes simultáneas.</span><span class="sxs-lookup"><span data-stu-id="969e2-309">If you were not using impersonation, the same service account could not have more than  _n_ concurrent requests total.</span></span> <span data-ttu-id="969e2-310">Por lo tanto, la ventaja es que, al usar la suplantación en una cuenta de servicio, se aumenta exponencialmente el número de buzones a los que se puede atender.</span><span class="sxs-lookup"><span data-stu-id="969e2-310">So, the takeaway is that by using impersonation on a service account, you exponentially increase the number of mailboxes you can service.</span></span> <span data-ttu-id="969e2-311">Para obtener más información, vea [mantener la afinidad entre un grupo de suscripciones y el servidor de buzones de Exchange](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md).</span><span class="sxs-lookup"><span data-stu-id="969e2-311">For more information, see [Maintain affinity between a group of subscriptions and the Mailbox server in Exchange](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md).</span></span>

- <span data-ttu-id="969e2-312">Los parámetros de directiva **EWSPercentTimeInMailboxRPC**, **EWSPercentTimeInCAS**y **EWSPercentTimeInAD** hacen referencia a acciones realizadas por un único hilo.</span><span class="sxs-lookup"><span data-stu-id="969e2-312">The **EWSPercentTimeInMailboxRPC**, **EWSPercentTimeInCAS**, and **EWSPercentTimeInAD** policy parameters refer to actions performed by a single thread.</span></span> <span data-ttu-id="969e2-313">Cuando una aplicación realiza varias operaciones simultáneas, debe tener en cuenta el efecto acumulado de estas operaciones en el presupuesto de recursos de usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-313">When an application performs multiple concurrent operations, you should account for the cumulative effect of these operations on the user resource budget.</span></span>

## <a name="throttling-implications-for-ews-batch-requests"></a><span data-ttu-id="969e2-314">Implicaciones de limitación de solicitudes por lotes de EWS</span><span class="sxs-lookup"><span data-stu-id="969e2-314">Throttling implications for EWS batch requests</span></span>

<span data-ttu-id="969e2-315">EWS permite procesar en lote varias solicitudes de elementos en una única solicitud ejecutada por el servidor de acceso de cliente.</span><span class="sxs-lookup"><span data-stu-id="969e2-315">EWS enables you to batch multiple item requests into a single request that is executed by the Client Access server.</span></span> <span data-ttu-id="969e2-316">Esto permite una mayor eficiencia y rendimiento.</span><span class="sxs-lookup"><span data-stu-id="969e2-316">This allows for greater efficiency and performance.</span></span> <span data-ttu-id="969e2-317">Cuando un servidor de Exchange ejecuta una solicitud por lotes, comprueba el presupuesto del usuario tras la ejecución de cada elemento del lote.</span><span class="sxs-lookup"><span data-stu-id="969e2-317">When an Exchange server executes a batched request, it checks the user's budget after the execution of each item within the batch.</span></span> <span data-ttu-id="969e2-318">Si la aplicación está por encima del presupuesto, el procesamiento del siguiente elemento del lote se retrasa hasta que el presupuesto de ese usuario se haya recargado.</span><span class="sxs-lookup"><span data-stu-id="969e2-318">If the application is over budget, the processing of the next item in the batch is delayed until the budget for that user has recharged.</span></span> <span data-ttu-id="969e2-319">Para asegurarse de que las aplicaciones que usan operaciones por lotes se ejecutan correctamente, limite el número de solicitudes de elementos que se pueden incluir en un solo lote y divida los lotes grandes en varios lotes más pequeños para aumentar la confiabilidad de los resultados.</span><span class="sxs-lookup"><span data-stu-id="969e2-319">To ensure that applications that use batch operations run successfully, limit the number of item requests that can be included in a single batch, and divide large batches across multiple smaller batches to increase the reliability of the results.</span></span> <span data-ttu-id="969e2-320">El efecto que tiene una operación por lotes en umbrales de limitación específicos depende del tipo de solicitud, el tamaño de los elementos que se van a procesar (por ejemplo, en las operaciones **UploadItems** o **ExportItems** ) y el contenido del buzón.</span><span class="sxs-lookup"><span data-stu-id="969e2-320">The effect that a batch operation has on particular throttling thresholds depends on the type of the request, the size of the items to be processed (for example in **UploadItems** or **ExportItems** operations) and the mailbox content.</span></span> <span data-ttu-id="969e2-321">Las directivas de limitación afectan a las operaciones por lotes haciendo que la solicitud tarde más tiempo en procesarse.</span><span class="sxs-lookup"><span data-stu-id="969e2-321">Throttling policies affect batch operations by causing the request to take longer to process.</span></span> <span data-ttu-id="969e2-322">Por lo tanto, el autor de la llamada tendrá que esperar más tiempo para la respuesta y, debido a que EWS limita el tiempo de ejecución de una solicitud por lotes a un minuto, la llamada podría agotar el tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="969e2-322">The caller will therefore have to wait longer for the response, and, because EWS limits the execution time of a batch request to one minute, the call could time out.</span></span>

<span data-ttu-id="969e2-323">Para determinar el tamaño de lote óptimo para una aplicación, realice pruebas unitarias con varios conjuntos de entrada para asegurarse de que la aplicación no encuentra ningún error en un entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="969e2-323">To determine the optimum batch size for an application, perform unit testing using various input sets to ensure that the application does not encounter any errors in a production environment.</span></span>

## <a name="throttling-policy-parameters-that-affect-ews-search-operations"></a><span data-ttu-id="969e2-324">Parámetros de directivas de limitación que afectan a las operaciones de búsqueda de EWS</span><span class="sxs-lookup"><span data-stu-id="969e2-324">Throttling policy parameters that affect EWS search operations</span></span>

<span data-ttu-id="969e2-325">[Las operaciones de búsqueda en EWS](search-and-ews-in-exchange.md) pueden requerir grandes cantidades de tiempo y recursos, según el modo en que se ejecuta la búsqueda y la información que se solicita.</span><span class="sxs-lookup"><span data-stu-id="969e2-325">[Search operations in EWS](search-and-ews-in-exchange.md) can require large amounts of time and resources, depending on how the search is run and what information is requested.</span></span> <span data-ttu-id="969e2-326">Para controlar el uso de recursos durante las búsquedas, se aplican dos parámetros de directiva: **EWSFastSearchTimeoutInSeconds** y **EWSFindCountLimit**.</span><span class="sxs-lookup"><span data-stu-id="969e2-326">To control resource usage during searches, two policy parameters take effect: **EWSFastSearchTimeoutInSeconds** and **EWSFindCountLimit**.</span></span>

<span data-ttu-id="969e2-327">El parámetro de directiva **EWSFastSearchTimeoutInSeconds** especifica la cantidad de tiempo, en segundos, que se ejecutan las búsquedas rápidas de EWS (también conocido como búsqueda de indización de contenido) antes de que se agote el tiempo de espera. Una búsqueda rápida es una búsqueda realizada mediante una cadena de consulta de sintaxis de consulta avanzada (AQS) en una [operación FindItem](https://msdn.microsoft.com/library/ebad6aae-16e7-44de-ae63-a95b24539729%28Office.15%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="969e2-327">The **EWSFastSearchTimeoutInSeconds** policy parameter specifies the amount of time, in seconds, that EWS fast searches (also known as content indexing search) run before they time out. A fast search is a search made by using an Advanced Query Syntax (AQS) query string in a [FindItem operation](https://msdn.microsoft.com/library/ebad6aae-16e7-44de-ae63-a95b24539729%28Office.15%29.aspx).</span></span>

<span data-ttu-id="969e2-328">Puede buscar en una carpeta de buzón de Exchange de dos maneras:</span><span class="sxs-lookup"><span data-stu-id="969e2-328">You can search an Exchange mailbox folder in two ways:</span></span>

- <span data-ttu-id="969e2-329">Mediante una búsqueda de almacén de Exchange, que realiza un análisis secuencial de todos los mensajes en el ámbito de la búsqueda de destino.</span><span class="sxs-lookup"><span data-stu-id="969e2-329">By using an Exchange store search, which performs a sequential scan of all messages in the target search scope.</span></span>

- <span data-ttu-id="969e2-330">Mediante el servicio de búsqueda de Exchange (indización de contenido).</span><span class="sxs-lookup"><span data-stu-id="969e2-330">By using the Exchange Search service (content indexing).</span></span>

<span data-ttu-id="969e2-331">Estos dos tipos de búsquedas pueden tener como resultado tiempos de espera.</span><span class="sxs-lookup"><span data-stu-id="969e2-331">Both of these types of searches can result in timeouts.</span></span> <span data-ttu-id="969e2-332">Cuando sea posible, use el servicio de búsqueda de Exchange, ya que estas búsquedas se destinan a índices de buzón y usan consultas AQS.</span><span class="sxs-lookup"><span data-stu-id="969e2-332">When possible, use the Exchange Search service because these searches are often targeted against mailbox indexes and use AQS queries.</span></span> <span data-ttu-id="969e2-333">En el siguiente ejemplo, se muestra cómo realizar una búsqueda AQS de la bandeja de entrada mediante EWS y el servicio de búsqueda de Exchange.</span><span class="sxs-lookup"><span data-stu-id="969e2-333">The following example shows how to perform an AQS search of the Inbox by using EWS and the Exchange Search service.</span></span>

```cs
ItemView iv = new ItemView(1000);
FindItemsResults<Item> fiitems = service.FindItems(WellKnownFolderName.Inbox, "subject:football", iv);
```

<span data-ttu-id="969e2-334">Si no puedes usar una búsqueda AQS, evita el uso de filtros de búsqueda demasiado complejos.</span><span class="sxs-lookup"><span data-stu-id="969e2-334">If you can't use an AQS search, avoid using overly complex search filters.</span></span> <span data-ttu-id="969e2-335">Intente evitar también la creación de filtros de búsqueda basados en valores calculados si la consulta incluye propiedades MAPI extendidas.</span><span class="sxs-lookup"><span data-stu-id="969e2-335">Also try to avoid creating search filters based on computed values if the query involves extended MAPI properties.</span></span> <span data-ttu-id="969e2-336">La búsqueda de AQS se introdujo en Exchange 2010.</span><span class="sxs-lookup"><span data-stu-id="969e2-336">AQS search was introduced in Exchange 2010.</span></span>

> [!NOTE]
> <span data-ttu-id="969e2-337">La primera vez que se ejecuta una consulta de búsqueda compleja del almacén de Exchange, se ejecuta muy despacio y puede agotar el tiempo de espera. A continuación, la consulta responderá con mayor rapidez.</span><span class="sxs-lookup"><span data-stu-id="969e2-337">The first time you run a complex Exchange store search query, it runs very slowly and may time out. After that, the query will respond more quickly.</span></span> <span data-ttu-id="969e2-338">Para obtener más información acerca de los procesos de back-end de Exchange Server que se producen durante las consultas de búsqueda del almacén de Exchange, vea [Understanding the performance Impact of High Item Counts and Restricted views](https://technet.microsoft.com/library/cc535025%28EXCHG.80%29.aspx) on technet.</span><span class="sxs-lookup"><span data-stu-id="969e2-338">For more information about the backend Exchange server processes that occur during Exchange store search queries, see [Understanding the Performance Impact of High Item Counts and Restricted Views](https://technet.microsoft.com/library/cc535025%28EXCHG.80%29.aspx) on TechNet.</span></span> <span data-ttu-id="969e2-339">El uso de un **SearchFilter** crea una restricción dinámica que ayuda a realizar consultas similares en el futuro, pero debido a que estas restricciones son de naturaleza dinámica, no son permanentes ni confiables y se eliminan después de un máximo de tres días.</span><span class="sxs-lookup"><span data-stu-id="969e2-339">Using a **SearchFilter** creates a dynamic restriction that helps similar queries in the future, but because these restrictions are dynamic in nature, they are not permanent or reliable, and are deleted after a maximum of three days.</span></span>

<span data-ttu-id="969e2-340">El parámetro de directiva **EWSFindCountLimit** especifica el número máximo de elementos a partir de los resultados de una operación **FindItem** o **FindFolder** que puede existir en la memoria de un servidor de acceso de cliente al mismo tiempo para un usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-340">The **EWSFindCountLimit** policy parameter specifies the maximum number of items from the results of a **FindItem** or **FindFolder** operation that can exist in memory on a Client Access server at the same time for one user.</span></span> <span data-ttu-id="969e2-341">Cada elemento o carpeta que procesa EWS en una solicitud **FindItem** o **FindFolder** se cuenta con el presupuesto especificado en el elemento **EWSFindCountLimit** .</span><span class="sxs-lookup"><span data-stu-id="969e2-341">Every item or folder that EWS processes in a **FindItem** or **FindFolder** request is counted against the budget specified in the **EWSFindCountLimit** element.</span></span> <span data-ttu-id="969e2-342">Cuando la respuesta se envía de vuelta al solicitante, se suelta la carga del recuento de búsqueda de la llamada actual.</span><span class="sxs-lookup"><span data-stu-id="969e2-342">When the response is sent back to the requester, the find count charge for the current call is released.</span></span> <span data-ttu-id="969e2-343">La respuesta que devuelve el servidor a un solicitante cuando se excede el presupuesto se basa en el valor del elemento **RequestServerVersion** y si el solicitante especificó la paginación.</span><span class="sxs-lookup"><span data-stu-id="969e2-343">The response the server returns to a requester when the budget is exceeded is based on the **RequestServerVersion** element value and whether the requester specified paging.</span></span> <span data-ttu-id="969e2-344">Cuando el valor del elemento **RequestServerVersion** indica Exchange 2010 o una versión anterior de Exchange, el servidor envía una respuesta de error con el código de error **ErrorServerBusy**.</span><span class="sxs-lookup"><span data-stu-id="969e2-344">When the value of the **RequestServerVersion** element indicates Exchange 2010 or an earlier version of Exchange, the server sends a failure response with error code **ErrorServerBusy**.</span></span> <span data-ttu-id="969e2-345">Si el valor del elemento **RequestServerVersion** indica una versión de Exchange que empieza con Exchange 2010 SP1 o Exchange Online, y el cliente usa la paginación, EWS puede devolver un conjunto de resultados parciales en lugar de un error.</span><span class="sxs-lookup"><span data-stu-id="969e2-345">If the value of the **RequestServerVersion** element indicates a version of Exchange starting with Exchange 2010 SP1 or Exchange Online, and the client is using paging, EWS may return a partial result set instead of an error.</span></span> <span data-ttu-id="969e2-346">La aplicación debe esperar que EWS no puede devolver todos los elementos.</span><span class="sxs-lookup"><span data-stu-id="969e2-346">Your application should expect that EWS might not return all items.</span></span> <span data-ttu-id="969e2-347">Si el valor del elemento **IncludesLastItemInRange** es false, la aplicación debe realizar otra solicitud **FindItem** o **FindFolder** con el nuevo desplazamiento y continuar hasta que el elemento **IncludesLastItemInRange** devuelva true.</span><span class="sxs-lookup"><span data-stu-id="969e2-347">If the value of the **IncludesLastItemInRange** element is false, the application should make another **FindItem** or **FindFolder** request with the new offset and continue until the **IncludesLastItemInRange** element returns true.</span></span>

<span data-ttu-id="969e2-348">Cuando se usa una operación **FindItem** o **FindFolder** , es importante usar la paginación.</span><span class="sxs-lookup"><span data-stu-id="969e2-348">When you use a **FindItem** or **FindFolder** operation, it is important to use paging.</span></span> <span data-ttu-id="969e2-349">La API administrada de EWS fuerza el uso de la paginación, pero si usa otros métodos, como objetos proxy de EWS o SOAP sin procesar, debe establecer la paginación explícitamente.</span><span class="sxs-lookup"><span data-stu-id="969e2-349">The EWS Managed API enforces the use of paging, but if you are using other methods, such as EWS proxy objects or raw SOAP, you need to explicitly set paging.</span></span> <span data-ttu-id="969e2-350">En el ejemplo siguiente se muestra cómo usar la paginación en la API administrada de EWS.</span><span class="sxs-lookup"><span data-stu-id="969e2-350">The following example shows how to use paging in the EWS Managed API.</span></span>

```cs
ItemView iv = new ItemView(1000);
FindItemsResults<Item> fiFindItemResults = service.FindItems(WellKnownFolderName.Inbox, iv);
```

> [!NOTE]
> <span data-ttu-id="969e2-351">La directiva predeterminada de Exchange limita el tamaño de página a 1000 elementos.</span><span class="sxs-lookup"><span data-stu-id="969e2-351">The default policy in Exchange limits the page size to 1000 items.</span></span> <span data-ttu-id="969e2-352">Establecer el tamaño de página en un valor mayor que este número no tiene ningún efecto práctico.</span><span class="sxs-lookup"><span data-stu-id="969e2-352">Setting the page size to a value that is greater than this number has no practical effect.</span></span>

<span data-ttu-id="969e2-353">Las aplicaciones también deben tener en cuenta el hecho de que el valor del parámetro de limitación _EWSFindCountLimit_ puede dar como resultado la devolución de un conjunto de resultados parcial para las aplicaciones que realizan solicitudes simultáneas.</span><span class="sxs-lookup"><span data-stu-id="969e2-353">Applications should also account for the fact that the  _EWSFindCountLimit_ throttling parameter value may result in a partial result set being returned for applications that make concurrent requests.</span></span> <span data-ttu-id="969e2-354">En el siguiente ejemplo se muestra cómo usar la propiedad **MoreAvailable** en la API administrada de EWS para asegurarse de que todos los resultados se incluyen en una consulta.</span><span class="sxs-lookup"><span data-stu-id="969e2-354">The following example shows how to use the **MoreAvailable** property in the EWS Managed API to ensure that all results are included in a query.</span></span>

```cs
ItemView iv = new ItemView(1000);
service.TraceEnabled = false;
FindItemsResults<Item> fiResults = null;
Do
{
    fiResults = service.FindItems(WellKnownFolderName.Inbox, iv);
    PropertySet itItemPropSet = new PropertySet(BasePropertySet.IdOnly) { EmailMessageSchema.Body };
    //Process Items in Result Set
    iv.Offset += fiResults.Items.Count;
}
while (fiResults.MoreAvailable == true);
```

## <a name="throttling-policies-and-concurrency"></a><span data-ttu-id="969e2-355">Directivas de limitación de peticiones y concurrencia</span><span class="sxs-lookup"><span data-stu-id="969e2-355">Throttling policies and concurrency</span></span>

<span data-ttu-id="969e2-356">La concurrencia hace referencia al número de conexiones de un usuario específico.</span><span class="sxs-lookup"><span data-stu-id="969e2-356">Concurrency refers to the number of connections from a specific user.</span></span> <span data-ttu-id="969e2-357">Una conexión se mantiene desde el momento en que se recibe una solicitud hasta que se envía una respuesta al solicitante.</span><span class="sxs-lookup"><span data-stu-id="969e2-357">A connection is held from the moment a request is received until a response is sent to the requester.</span></span> <span data-ttu-id="969e2-358">Si los usuarios intentan efectuar más solicitudes simultáneas de las que permite su directiva, el nuevo intento de conexión dará error.</span><span class="sxs-lookup"><span data-stu-id="969e2-358">If users try to make more concurrent requests than their policy allows, the new connection attempt fails.</span></span> <span data-ttu-id="969e2-359">Sin embargo, las conexiones existentes siguen siendo válidas.</span><span class="sxs-lookup"><span data-stu-id="969e2-359">However, the existing connections remain valid.</span></span> <span data-ttu-id="969e2-360">Las directivas de limitación pueden afectar a la simultaneidad de varias formas.</span><span class="sxs-lookup"><span data-stu-id="969e2-360">Throttling policies can affect concurrency in a number of different ways.</span></span>

<span data-ttu-id="969e2-361">El parámetro de la Directiva de limitación **EWSMaxConcurrency** establece el número de conexiones simultáneas que un usuario específico puede tener en un servidor de Exchange al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="969e2-361">The **EWSMaxConcurrency** throttling policy parameter sets the number of concurrent connections that a specific user can have against an Exchange server at one time.</span></span> <span data-ttu-id="969e2-362">Para determinar el número máximo de conexiones simultáneas que se permiten, tenga en cuenta las conexiones que usarán los clientes de Outlook.</span><span class="sxs-lookup"><span data-stu-id="969e2-362">To determine the maximum number of concurrent connections to allow, consider the connections that Outlook clients will use.</span></span> <span data-ttu-id="969e2-363">Outlook 2007 y Outlook 2010 usan EWS para tener acceso a la información de disponibilidad y fuera de la oficina (OOF).</span><span class="sxs-lookup"><span data-stu-id="969e2-363">Outlook 2007 and Outlook 2010 use EWS to access availability and Out of Office (OOF) information.</span></span> <span data-ttu-id="969e2-364">Mac Outlook 2011 usa EWS para todas las funciones de acceso de cliente.</span><span class="sxs-lookup"><span data-stu-id="969e2-364">Mac Outlook 2011 uses EWS for all client access functionality.</span></span> <span data-ttu-id="969e2-365">Según el número de clientes de Outlook que se conectan de forma activa al buzón de un usuario, el número de conexiones simultáneas disponibles para un usuario puede ser limitado.</span><span class="sxs-lookup"><span data-stu-id="969e2-365">Depending on the number of Outlook clients that are actively connecting to a user's mailbox, the number of concurrent connections available for a user might be limited.</span></span> <span data-ttu-id="969e2-366">Además, si la aplicación tiene que conectarse a varios buzones de forma simultánea mientras usa un solo contexto de seguridad, es importante tener en cuenta el valor de la directiva **EWSMaxConcurrency** .</span><span class="sxs-lookup"><span data-stu-id="969e2-366">Also, if your application has to connect to multiple mailboxes simultaneously while using a single security context, it is important to take the value of the **EWSMaxConcurrency** policy into account.</span></span> <span data-ttu-id="969e2-367">Para obtener más información sobre el uso de un solo contexto de seguridad con conexiones simultáneas, vea [consideraciones sobre limitación de aplicaciones que usan la suplantación de EWS](#throttling-considerations-for-applications-that-use-ews-impersonation) anteriormente en este artículo.</span><span class="sxs-lookup"><span data-stu-id="969e2-367">For more information about using a single security context with concurrent connections, see [Throttling considerations for applications that use EWS impersonation](#throttling-considerations-for-applications-that-use-ews-impersonation) earlier in this article.</span></span>

<span data-ttu-id="969e2-368">Las aplicaciones que se conectan a la vez a varios buzones de correo tienen que poder realizar un seguimiento del uso de recursos en el lado cliente.</span><span class="sxs-lookup"><span data-stu-id="969e2-368">Applications that concurrently connect to multiple mailboxes have to be able to track resource usage on the client side.</span></span> <span data-ttu-id="969e2-369">Como las operaciones de EWS se basan en solicitudes/respuestas, puede asegurarse de que funcionan correctamente en el umbral de **EWSMaxConcurrency** mediante el seguimiento del número de conexiones que se producen entre el inicio de una solicitud y el momento en que se recibe la respuesta, y que garantiza que no se produzcan más de diez solicitudes abiertas al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="969e2-369">Because EWS operations are request/response-based, you can ensure that your applications function well within the **EWSMaxConcurrency** threshold by tracking the number of connections that occur between the start of a request and when the response is received and ensuring that no more than ten open requests occur concurrently.</span></span>

<span data-ttu-id="969e2-370">El parámetro de directiva **EWSFindCountLimit** especifica el tamaño máximo de resultado que puede usar una operación **FindItem** o **FindFolder** en un servidor de acceso de cliente al mismo tiempo para un usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-370">The **EWSFindCountLimit** policy parameter specifies the maximum result size a **FindItem** or **FindFolder** operation can use on a Client Access server at the same time for one user.</span></span> <span data-ttu-id="969e2-371">Si una aplicación (o posiblemente varias aplicaciones) realiza dos solicitudes **FindItem** de EWS simultáneas que devuelven 100 elementos para un usuario específico, la carga de la **EWSFindCountLimit** con el presupuesto del usuario específico será 200.</span><span class="sxs-lookup"><span data-stu-id="969e2-371">If an application (or potentially multiple applications) makes two concurrent EWS **FindItem** requests that return 100 items each for a specific user, the **EWSFindCountLimit** charge against that specific user's budget will be 200.</span></span> <span data-ttu-id="969e2-372">Cuando se devuelve la primera solicitud, el presupuesto desciende a 100 y, cuando se devuelve la segunda solicitud, el presupuesto disminuye a cero.</span><span class="sxs-lookup"><span data-stu-id="969e2-372">When the first request returns, the budget drops to 100, and when the second request returns, the budget drops to zero.</span></span> <span data-ttu-id="969e2-373">Si la misma aplicación realizara dos solicitudes simultáneas de 1000 elementos, el valor de presupuesto sería 2000 elementos, lo que supera el valor de **EWSFindCountLimit** .</span><span class="sxs-lookup"><span data-stu-id="969e2-373">If the same application were to make two simultaneous requests for 1000 items, the budget value would be 2000 items, which exceeds the **EWSFindCountLimit** value.</span></span> <span data-ttu-id="969e2-374">Si el presupuesto del usuario para los elementos desciende por debajo de cero, la siguiente solicitud genera un error hasta que el presupuesto del usuario recarga a uno o más.</span><span class="sxs-lookup"><span data-stu-id="969e2-374">If the user's budget for items drops below zero, the next request results in an error until the user's budget recharges to one or more.</span></span>

## <a name="throttling-considerations-for-ews-notification-applications"></a><span data-ttu-id="969e2-375">Consideraciones sobre la limitación de solicitudes de notificaciones de EWS</span><span class="sxs-lookup"><span data-stu-id="969e2-375">Throttling considerations for EWS notification applications</span></span>

<span data-ttu-id="969e2-376">Si va a compilar aplicaciones de notificación de EWS que usan las notificaciones de inserción, extracción o transmisión por secuencias, debe tener en cuenta las implicaciones de las directivas de limitación de peticiones de **EWSMaxSubscriptions** y **EWSMaxConcurrency** , y el **HangingConnectionLimit**.</span><span class="sxs-lookup"><span data-stu-id="969e2-376">If you are building EWS notification applications that make use of either push, pull, or streaming notifications, you should consider the implications of the **EWSMaxSubscriptions** and the **EWSMaxConcurrency** throttling policies, and the **HangingConnectionLimit**.</span></span>

<span data-ttu-id="969e2-377">El parámetro de directiva **EWSMaxSubscriptions** especifica el número máximo de suscripciones de inserción, extracción y transmisión activas que un usuario puede tener en un servidor de acceso de cliente específico al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="969e2-377">The **EWSMaxSubscriptions** policy parameter specifies the maximum number of active push, pull, and streaming subscriptions that a user can have on a specific Client Access server at the same time.</span></span> <span data-ttu-id="969e2-378">Las diferentes versiones de Exchange tienen valores predeterminados diferentes para este parámetro.</span><span class="sxs-lookup"><span data-stu-id="969e2-378">Different versions of Exchange have different default values for this parameter.</span></span> <span data-ttu-id="969e2-379">Un usuario puede suscribirse a todas las carpetas de un buzón mediante la propiedad **SubscribeToAllFolders** , que usa una única suscripción contra el presupuesto **EWSMaxSubscriptions** .</span><span class="sxs-lookup"><span data-stu-id="969e2-379">A user can subscribe to all folders in a mailbox by using the **SubscribeToAllFolders** property - this uses a single subscription against the **EWSMaxSubscriptions** budget.</span></span> <span data-ttu-id="969e2-380">Los usuarios pueden suscribirse a carpetas individuales, con cada suscripción de carpeta contando hacia el presupuesto de **EWSMaxSubscriptions** , hasta el límite establecido por el valor del parámetro **EWSMaxSubscriptions** (por ejemplo, los usuarios pueden suscribirse a 20 carpetas de calendario en buzones diferentes si **EWSMaxSubscriptions** se establece en 20).</span><span class="sxs-lookup"><span data-stu-id="969e2-380">Users can subscribe to individual folders, with each folder subscription counting towards the **EWSMaxSubscriptions** budget, up to the limit set by the value of the **EWSMaxSubscriptions** parameter (for example, users can subscribe to 20 calendar folders in different mailboxes if **EWSMaxSubscriptions** is set to 20).</span></span>

<span data-ttu-id="969e2-381">Para obtener información sobre la suplantación y el parámetro **EWSMaxSubscriptions** , vea [consideraciones sobre limitación de aplicaciones que usan la suplantación de EWS](#throttling-considerations-for-applications-that-use-ews-impersonation) anteriormente en este artículo.</span><span class="sxs-lookup"><span data-stu-id="969e2-381">For information about impersonation and the **EWSMaxSubscriptions** parameter, see [Throttling considerations for applications that use EWS impersonation](#throttling-considerations-for-applications-that-use-ews-impersonation) earlier in this article.</span></span>

<span data-ttu-id="969e2-382">El parámetro de directiva **EWSMaxConcurrency** también puede ser un problema de las notificaciones de EWS; por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="969e2-382">The **EWSMaxConcurrency** policy parameter can also be an issue for EWS notifications; for example:</span></span>

- <span data-ttu-id="969e2-383">Cuando EWS incrementa el número de conexiones para el propietario de la suscripción mientras la notificación se genera mediante una suscripción de inserción.</span><span class="sxs-lookup"><span data-stu-id="969e2-383">When EWS increments the connection count for the owner of the subscription while the notification is being generated by a push subscription.</span></span>

- <span data-ttu-id="969e2-384">Cuando una aplicación está diseñada para escuchar buzones de varios usuarios y los usuarios reciben notificaciones simultáneas para una instancia de un mensaje que se envía a una lista de distribución.</span><span class="sxs-lookup"><span data-stu-id="969e2-384">When an application is designed to listen to multiple users' mailboxes, and users receive simultaneous notifications for an instance of a message that is sent to a distribution list.</span></span>

<span data-ttu-id="969e2-385">Si la aplicación de notificaciones es multiproceso y realiza solicitudes de conexión simultáneas para obtener más información acerca de un mensaje en particular recibido por una cuenta de usuario, se puede superar el límite de directivas de **EWSMaxConcurrency** .</span><span class="sxs-lookup"><span data-stu-id="969e2-385">If the notification application is multi-threaded and makes simultaneous connection requests to get more information about a particular message that was received by a user account, the **EWSMaxConcurrency** policy limit can be exceeded.</span></span> <span data-ttu-id="969e2-386">Para tener esto en cuenta, considere la posibilidad de supervisar las conexiones simultáneas en la aplicación, incluidas las que puede usar el servidor y la implementación de la cola de solicitudes en el cliente.</span><span class="sxs-lookup"><span data-stu-id="969e2-386">To account for this, consider monitoring the concurrent connections in your application, including those that might be used by the server, and implementing request queuing on the client.</span></span>

<span data-ttu-id="969e2-387">**HangingConnectionLimit** solo se aplica a las notificaciones de transmisión por secuencias.</span><span class="sxs-lookup"><span data-stu-id="969e2-387">The **HangingConnectionLimit** is only applicable to streaming notifications.</span></span> <span data-ttu-id="969e2-388">Este límite se establece en el archivo Web. config, lo que significa que un administrador de Exchange puede establecer este valor en un servidor de Exchange local, pero los buzones de correo de Exchange Online deben usar el valor predeterminado para este límite, que es 3 tanto para Exchange online como para Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="969e2-388">This limit is set in the web.config file, which means that an Exchange administrator can set this value on an on-premises Exchange server, but Exchange Online mailboxes must use the default value for this limit, which is 3 for both Exchange Online and Exchange 2013.</span></span> <span data-ttu-id="969e2-389">Para obtener más información, vea [¿qué valores de limitación se deben tener en cuenta?](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling).</span><span class="sxs-lookup"><span data-stu-id="969e2-389">To learn more, see [What throttling values do I need to take into consideration?](how-to-maintain-affinity-between-group-of-subscriptions-and-mailbox-server.md#bk_throttling).</span></span>

## <a name="throttling-policy-and-application-performance"></a><span data-ttu-id="969e2-390">Rendimiento de la aplicación y la Directiva de limitación</span><span class="sxs-lookup"><span data-stu-id="969e2-390">Throttling policy and application performance</span></span>

<span data-ttu-id="969e2-391">Los tres parámetros siguientes de la Directiva de limitación **PercentTimeIn** afectan a la cantidad de tiempo que puede consumir una aplicación EWS en un servidor de acceso de cliente:</span><span class="sxs-lookup"><span data-stu-id="969e2-391">The following three parameters of the **PercentTimeIn** throttling policy affect the amount of time an EWS application can consume on a Client Access server:</span></span>

- <span data-ttu-id="969e2-392">**EWSPercentTimeInAD**</span><span class="sxs-lookup"><span data-stu-id="969e2-392">**EWSPercentTimeInAD**</span></span>

- <span data-ttu-id="969e2-393">**EWSPercentTimeInCAS**</span><span class="sxs-lookup"><span data-stu-id="969e2-393">**EWSPercentTimeInCAS**</span></span>

- <span data-ttu-id="969e2-394">**EWSPercentTimeInMailboxRPC**</span><span class="sxs-lookup"><span data-stu-id="969e2-394">**EWSPercentTimeInMailboxRPC**</span></span>

<span data-ttu-id="969e2-395">Los valores especificados en los parámetros de directiva **PercentTimeIn** indican la cantidad de tiempo que se asigna un subproceso que realiza una solicitud.</span><span class="sxs-lookup"><span data-stu-id="969e2-395">The values specified in the **PercentTimeIn** policy parameters indicate the amount of time that one thread making one request is allocated.</span></span> <span data-ttu-id="969e2-396">Por ejemplo, suponiendo un valor de **EWSPercentTimeInCAS** de 90, si un proceso realiza dos solicitudes simultáneas que pasan 54 segundos cada ejecución de código en el servidor de acceso de cliente, el proceso usa 108 segundos en una ventana de 60.</span><span class="sxs-lookup"><span data-stu-id="969e2-396">For example, assuming a **EWSPercentTimeInCAS** value of 90, if a process makes two concurrent requests that spend 54 seconds each running code on the Client Access server, the process uses 108 seconds in a 60 second window.</span></span> <span data-ttu-id="969e2-397">Esto representa un valor de parámetro **EWSPercentTimeInCAS** de 180 por ciento.</span><span class="sxs-lookup"><span data-stu-id="969e2-397">This represents an **EWSPercentTimeInCAS** parameter value of 180 percent.</span></span>

> [!NOTE]
> <span data-ttu-id="969e2-398">El valor del parámetro **EWSPercentTimeInCAS** es un supraconjunto superpuestos de los valores de los parámetros **EWSPercentTimeInAD** y **EWSPercentTimeInMailboxRPC** .</span><span class="sxs-lookup"><span data-stu-id="969e2-398">The **EWSPercentTimeInCAS** parameter value is an overlapping superset of the **EWSPercentTimeInAD** and **EWSPercentTimeInMailboxRPC** parameter values.</span></span> <span data-ttu-id="969e2-399">Esto significa que el gasto en el tiempo de procesamiento del servidor de acceso de clientes será siempre mayor que los gastos en **EWSPercentTimeInAD** y **EWSPercentTimeInMailboxRPC**.</span><span class="sxs-lookup"><span data-stu-id="969e2-399">This means that the expenditure in Client Access server processing time will always be larger than the expenditures in **EWSPercentTimeInAD** and **EWSPercentTimeInMailboxRPC**.</span></span> <span data-ttu-id="969e2-400">Esto se debe a que para que el componente de Exchange realice una llamada de Active Directory o RPC, ya debe estar ejecutando el código del servidor de acceso de cliente.</span><span class="sxs-lookup"><span data-stu-id="969e2-400">This is because for the Exchange component to make an Active Directory or RPC call, it must already be running Client Access server code.</span></span> <span data-ttu-id="969e2-401">Además, los gastos en el tiempo de procesamiento de **EWSPercentTimeInCAS** no se detienen mientras se realizan llamadas LDAP o RPC.</span><span class="sxs-lookup"><span data-stu-id="969e2-401">In addition, the expenditure in processing time for **EWSPercentTimeInCAS** doesn't stop while LDAP or RPC calls are being made.</span></span> <span data-ttu-id="969e2-402">Aunque la solicitud podría esperar de forma sincrónica una respuesta de servicios de dominio de Active Directory (AD DS) o del almacén de Exchange, el proceso todavía está consumiendo un subproceso en el servidor y, por lo tanto, el subproceso debe seguir cobrando por ese uso.</span><span class="sxs-lookup"><span data-stu-id="969e2-402">Although the request might be synchronously waiting for a response from Active Directory Domain Services (AD DS) or the Exchange store, the process is still consuming a thread on the server, and therefore the thread should continue to be charged for that usage.</span></span>

<span data-ttu-id="969e2-403">La cantidad de tiempo de CPU que puede tardar una aplicación en un período de 60-segundo puede superar estos límites de limitación; por lo tanto, es importante tener en cuenta el volumen y el tipo de solicitudes que se realizan.</span><span class="sxs-lookup"><span data-stu-id="969e2-403">The amount of CPU time an application may take in a 60-second period might exceed these throttling limits; therefore, it is important to consider the volume and type of requests that are being made.</span></span> <span data-ttu-id="969e2-404">Por ejemplo, un lote grande de operaciones de **ResolveNames** que se realizan simultáneamente puede exceder el valor del parámetro de directiva **EWSPercentTimeInAD** .</span><span class="sxs-lookup"><span data-stu-id="969e2-404">For example, a large batch of **ResolveNames** operations that are made simultaneously can exceed the **EWSPercentTimeInAD** policy parameter value.</span></span> <span data-ttu-id="969e2-405">Los valores de directiva contenidos en la Directiva de limitación predeterminada están diseñados para permitir que la mayoría de las aplicaciones de EWS funcionen sin problemas; sin embargo, cuando las aplicaciones multiprocesos de alto volumen colocan un gran volumen de solicitudes en un servidor de acceso de cliente en particular, esto puede crear problemas.</span><span class="sxs-lookup"><span data-stu-id="969e2-405">The policy values that are contained in the default throttling policy are designed to allow most EWS applications to function without issue; however, when multi-threaded high-volume applications place a large volume of requests on one particular Client Access server, this can create problems.</span></span> <span data-ttu-id="969e2-406">Para evitarlo, considere limitar el tamaño de los lotes que se van a ejecutar en el servidor.</span><span class="sxs-lookup"><span data-stu-id="969e2-406">To avoid this, consider limiting the size of batches that are going to execute against the server.</span></span>

## <a name="throttling-policies-and-applications-that-send-a-large-volume-of-email"></a><span data-ttu-id="969e2-407">Limitación de las directivas y aplicaciones que envían un gran volumen de correo electrónico</span><span class="sxs-lookup"><span data-stu-id="969e2-407">Throttling policies and applications that send a large volume of email</span></span>

<span data-ttu-id="969e2-408">Las directivas de limitación predeterminadas incluyen tres parámetros de directiva de límite de velocidad que pueden afectar a las aplicaciones que usan EWS para enviar un gran volumen de mensajes o enviar mensajes en lotes grandes en un breve período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="969e2-408">The default throttling policies include three rate limit policy parameters that can affect applications that use EWS to send a large volume of messages or send messages in large batches in a short period of time.</span></span>

> [!NOTE]
> <span data-ttu-id="969e2-409">En general, se recomienda no usar EWS para enviar correo electrónico masivo.</span><span class="sxs-lookup"><span data-stu-id="969e2-409">In general, we recommend that you do not use EWS to send bulk email.</span></span> <span data-ttu-id="969e2-410">Use un host SMTP especializado en servicios de correo masivo para enviar mensajes de correo electrónico masivos de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="969e2-410">Use an SMTP host that specializes in bulk mail services to submit frequent large bulk email messages.</span></span>

<span data-ttu-id="969e2-411">El parámetro de directiva **MessageRateLimit** especifica el número de mensajes por minuto que puede enviar cualquier cliente de Exchange, incluido EWS.</span><span class="sxs-lookup"><span data-stu-id="969e2-411">The **MessageRateLimit** policy parameter specifies the number of messages per minute that can be submitted by any Exchange client, including EWS.</span></span> <span data-ttu-id="969e2-412">De forma predeterminada, esta directiva está configurada en 30 mensajes por minuto.</span><span class="sxs-lookup"><span data-stu-id="969e2-412">By default, this policy is set to 30 messages per minute.</span></span> <span data-ttu-id="969e2-413">Para los usuarios normales, suele ser suficiente.</span><span class="sxs-lookup"><span data-stu-id="969e2-413">For ordinary users, this is generally sufficient.</span></span> <span data-ttu-id="969e2-414">Sin embargo, las aplicaciones que envían lotes de mensajes de correo electrónico de gran tamaño, por ejemplo, como parte de un programa de facturación, pueden tener problemas.</span><span class="sxs-lookup"><span data-stu-id="969e2-414">However, applications that send large batches of email messages, for example as part of an invoicing program, can run into problems.</span></span> <span data-ttu-id="969e2-415">Cuando se supera el límite de esta Directiva, se retrasa la entrega de mensajes para el buzón.</span><span class="sxs-lookup"><span data-stu-id="969e2-415">When this policy limit is exceeded, message delivery for the mailbox is delayed.</span></span> <span data-ttu-id="969e2-416">En concreto, los mensajes aparecerán en la carpeta Bandeja de salida o borradores durante períodos de tiempo más prolongados en los que un usuario o aplicación envía un número de mensajes mayor que el valor especificado por el parámetro **MessageRateLimit** .</span><span class="sxs-lookup"><span data-stu-id="969e2-416">Specifically, messages will appear in the Outbox or Drafts folder for longer periods of time when a user or application submits a larger number of messages than the value specified by the **MessageRateLimit** parameter.</span></span> <span data-ttu-id="969e2-417">No olvide tener esto en cuenta al desarrollar un sistema de seguimiento de entregas, especialmente si la aplicación usa un buzón al que los usuarios se conectan a través de Outlook.</span><span class="sxs-lookup"><span data-stu-id="969e2-417">Be sure to consider this when you are developing a delivery tracking system, especially if your application uses a mailbox that users connect to via Outlook.</span></span> <span data-ttu-id="969e2-418">Cuando los elementos aplazados se almacenan en la carpeta Bandeja de salida o borradores, los usuarios pueden interpretarlo como un error.</span><span class="sxs-lookup"><span data-stu-id="969e2-418">When deferred items are stored in the Outbox or drafts folder, users might interpret that as an error.</span></span>

<span data-ttu-id="969e2-419">El parámetro de directiva **RecipientRateLimit** especifica el límite en el número de destinatarios que un usuario puede direccionar en un período de 24 horas.</span><span class="sxs-lookup"><span data-stu-id="969e2-419">The **RecipientRateLimit** policy parameter specifies the limit on the number of recipients that a user can address in a 24-hour period.</span></span> <span data-ttu-id="969e2-420">Por ejemplo, si este valor se establece en 500, significa que una sola cuenta de buzón de Exchange puede enviar mensajes a un máximo de 500 destinatarios cada día.</span><span class="sxs-lookup"><span data-stu-id="969e2-420">For example, if this value is set to 500, it means that a single Exchange mailbox account can send messages to no more than 500 recipients each day.</span></span> <span data-ttu-id="969e2-421">Este límite se aplica a los mensajes a destinatarios que están dentro y fuera de la organización.</span><span class="sxs-lookup"><span data-stu-id="969e2-421">This limit applies to messages to recipients that are inside and outside the organization.</span></span> <span data-ttu-id="969e2-422">Este límite predeterminado puede causar problemas para algunas aplicaciones de línea de negocio que realizan facturas de fin de mes y que necesitan enviar mensajes a más de este número de destinatarios.</span><span class="sxs-lookup"><span data-stu-id="969e2-422">This default limit might cause problems for some line-of-business applications that do end-of-month invoice runs and need to send messages to more than this number of recipients.</span></span> <span data-ttu-id="969e2-423">Puede usar servicios externos que permitan el procesamiento por lotes de mensajes o soluciones de retransmisión de salida local independientes para evitar esta limitación.</span><span class="sxs-lookup"><span data-stu-id="969e2-423">You can use external services that enable batch processing of messages or separate on-premises outbound relay solutions to work around this limitation.</span></span>

<span data-ttu-id="969e2-424">El parámetro de directiva **ForwardeeLimit** especifica el número máximo de destinatarios a los que se pueden reenviar o redirigir los mensajes mediante reglas de la bandeja de entrada.</span><span class="sxs-lookup"><span data-stu-id="969e2-424">The **ForwardeeLimit** policy parameter specifies the maximum number of recipients that messages can be forwarded or redirected to by means of Inbox rules.</span></span> <span data-ttu-id="969e2-425">Este parámetro no limita el número de mensajes que se pueden reenviar o redirigir a los destinatarios.</span><span class="sxs-lookup"><span data-stu-id="969e2-425">This parameter doesn't limit the number of messages that can be forwarded or redirected to the recipients.</span></span>

## <a name="errors-generated-when-throttling-limits-are-exceeded"></a><span data-ttu-id="969e2-426">Errores generados al superar los límites de limitación</span><span class="sxs-lookup"><span data-stu-id="969e2-426">Errors generated when throttling limits are exceeded</span></span>

<span data-ttu-id="969e2-427">Cuando se superan las directivas de limitación, EWS genera uno de los errores enumerados en la siguiente tabla.</span><span class="sxs-lookup"><span data-stu-id="969e2-427">When throttling polices are exceeded, EWS generates one of the errors listed in the following table.</span></span>

<span data-ttu-id="969e2-428">**Tabla 3: errores de límite de limitación**</span><span class="sxs-lookup"><span data-stu-id="969e2-428">**Table 3: Throttling limit errors**</span></span>

|<span data-ttu-id="969e2-429">**Error**</span><span class="sxs-lookup"><span data-stu-id="969e2-429">**Error**</span></span>|<span data-ttu-id="969e2-430">**Parámetro de la Directiva de limitación**</span><span class="sxs-lookup"><span data-stu-id="969e2-430">**Throttling policy parameter**</span></span>|<span data-ttu-id="969e2-431">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="969e2-431">**Description**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="969e2-432">ErrorExceededConnectionCount</span><span class="sxs-lookup"><span data-stu-id="969e2-432">ErrorExceededConnectionCount</span></span>  <br/> |<span data-ttu-id="969e2-433">**EWSMaxConcurrency**</span><span class="sxs-lookup"><span data-stu-id="969e2-433">**EWSMaxConcurrency**</span></span> <br/> |<span data-ttu-id="969e2-434">Indica que hay más solicitudes simultáneas en el servidor de las permitidas por la Directiva de un usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-434">Indicates that there are more concurrent requests against the server than are allowed by a user's policy.</span></span>  <br/> |
|<span data-ttu-id="969e2-435">ErrorExceededSubscriptionCount</span><span class="sxs-lookup"><span data-stu-id="969e2-435">ErrorExceededSubscriptionCount</span></span>  <br/> |<span data-ttu-id="969e2-436">**EWSMaxSubscriptions**</span><span class="sxs-lookup"><span data-stu-id="969e2-436">**EWSMaxSubscriptions**</span></span> <br/> |<span data-ttu-id="969e2-437">Indica que se ha superado el número máximo de suscripciones de la Directiva de limitación de un usuario.</span><span class="sxs-lookup"><span data-stu-id="969e2-437">Indicates that a user's throttling policy maximum subscription count has been exceeded.</span></span>  <br/> |
|<span data-ttu-id="969e2-438">ErrorExceededFindCountLimit</span><span class="sxs-lookup"><span data-stu-id="969e2-438">ErrorExceededFindCountLimit</span></span>  <br/> |<span data-ttu-id="969e2-439">**EWSFindCountLimit**</span><span class="sxs-lookup"><span data-stu-id="969e2-439">**EWSFindCountLimit**</span></span> <br/> |<span data-ttu-id="969e2-440">Indica que una llamada a una operación de búsqueda ha superado el número total de elementos que se pueden devolver.</span><span class="sxs-lookup"><span data-stu-id="969e2-440">Indicates that a search operation call has exceeded the total number of items that can be returned.</span></span>  <br/> |
|<span data-ttu-id="969e2-441">ErrorServerBusy</span><span class="sxs-lookup"><span data-stu-id="969e2-441">ErrorServerBusy</span></span>  <br/> |<span data-ttu-id="969e2-442">**EWSPercentTimeInMailboxRPC**         **EWSPercentTimeInCAS**         **EWSPercentTimeInAD**</span><span class="sxs-lookup"><span data-stu-id="969e2-442">**EWSPercentTimeInMailboxRPC**         **EWSPercentTimeInCAS**         **EWSPercentTimeInAD**</span></span> <br/> |<span data-ttu-id="969e2-443">Se produce cuando el servidor está ocupado.</span><span class="sxs-lookup"><span data-stu-id="969e2-443">Occurs when the server is busy.</span></span> <span data-ttu-id="969e2-444">El valor BackOffMilliseconds devuelto con ErrorServerBusy errores indica al cliente la cantidad de tiempo que debe esperar hasta que deba volver a enviar la solicitud que causó la respuesta que ha devuelto el código de error.</span><span class="sxs-lookup"><span data-stu-id="969e2-444">The BackOffMilliseconds value returned with ErrorServerBusy errors indicates to the client the amount of time it should wait until it should resubmit the request that caused the response that returned this error code.</span></span>  <br/> |

<span data-ttu-id="969e2-445">En la siguiente tabla se enumeran los códigos de Estado HTTP que se devuelven al limitar los errores.</span><span class="sxs-lookup"><span data-stu-id="969e2-445">The following table lists the HTTP status codes that are returned by throttling errors.</span></span>

<span data-ttu-id="969e2-446">**Tabla 4: códigos de Estado HTTP devueltos por errores de limitación**</span><span class="sxs-lookup"><span data-stu-id="969e2-446">**Table 4: HTTP status codes returned by throttling errors**</span></span>

|<span data-ttu-id="969e2-447">**Código de estado HTTP**</span><span class="sxs-lookup"><span data-stu-id="969e2-447">**HTTP status code**</span></span>|<span data-ttu-id="969e2-448">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="969e2-448">**Description**</span></span>|
|:-----|:-----|
|<span data-ttu-id="969e2-449">HTTP 503</span><span class="sxs-lookup"><span data-stu-id="969e2-449">HTTP 503</span></span>  <br/> |<span data-ttu-id="969e2-450">Indica que las solicitudes de EWS se encuentran en la cola de IIS.</span><span class="sxs-lookup"><span data-stu-id="969e2-450">Indicates that EWS requests are queuing with IIS.</span></span> <span data-ttu-id="969e2-451">El cliente debe retrasar el envío de solicitudes adicionales hasta un momento posterior.</span><span class="sxs-lookup"><span data-stu-id="969e2-451">The client should delay sending additional requests until a later time.</span></span>  <br/> |
|<span data-ttu-id="969e2-452">HTTP 500</span><span class="sxs-lookup"><span data-stu-id="969e2-452">HTTP 500</span></span>  <br/> |<span data-ttu-id="969e2-453">Indica un error interno del servidor con el código de error ErrorServerBusy.</span><span class="sxs-lookup"><span data-stu-id="969e2-453">Indicates an internal server error with the ErrorServerBusy error code.</span></span> <span data-ttu-id="969e2-454">Esto indica que el cliente debe retrasar el envío de solicitudes adicionales hasta un momento posterior.</span><span class="sxs-lookup"><span data-stu-id="969e2-454">This indicates that the client should delay sending additional requests until a later time.</span></span> <span data-ttu-id="969e2-455">La respuesta puede contener una sugerencia de deshacer llamada BackOffMilliseconds.</span><span class="sxs-lookup"><span data-stu-id="969e2-455">The response may contain a back off hint called BackOffMilliseconds.</span></span> <span data-ttu-id="969e2-456">Si está presente, el valor de BackOffMilliseconds debe usarse como duración hasta que el cliente reenvíe una solicitud.</span><span class="sxs-lookup"><span data-stu-id="969e2-456">If present, the value of BackOffMilliseconds should be used as the duration until the client resubmits a request.</span></span>  <br/> |
|<span data-ttu-id="969e2-457">HTTP 200</span><span class="sxs-lookup"><span data-stu-id="969e2-457">HTTP 200</span></span>  <br/> |<span data-ttu-id="969e2-458">Contiene una respuesta de error basada en esquema EWS con un código de error ErrorInternalServerError.</span><span class="sxs-lookup"><span data-stu-id="969e2-458">Contains an EWS schema-based error response with an ErrorInternalServerError error code.</span></span> <span data-ttu-id="969e2-459">Es posible que haya un código de error ErrorServerBusy interno.</span><span class="sxs-lookup"><span data-stu-id="969e2-459">An inner ErrorServerBusy error code may be present.</span></span> <span data-ttu-id="969e2-460">Esto indica que el cliente debe retrasar el envío de solicitudes adicionales hasta un momento posterior.</span><span class="sxs-lookup"><span data-stu-id="969e2-460">This indicates that the client should delay sending additional requests until a later time.</span></span>  <br/> |

## <a name="see-also"></a><span data-ttu-id="969e2-461">Vea también</span><span class="sxs-lookup"><span data-stu-id="969e2-461">See also</span></span>

- [<span data-ttu-id="969e2-462">Administración de la carga de trabajo de Exchange</span><span class="sxs-lookup"><span data-stu-id="969e2-462">Exchange Workload Management</span></span>](https://technet.microsoft.com/library/jj150503.aspx)
- [<span data-ttu-id="969e2-463">New-ThrottlingPolicy cmdlet</span><span class="sxs-lookup"><span data-stu-id="969e2-463">New-ThrottlingPolicy cmdlet</span></span>](https://technet.microsoft.com/library/dd351045.aspx)
- [<span data-ttu-id="969e2-464">Descripción de las directivas de limitación de clientes</span><span class="sxs-lookup"><span data-stu-id="969e2-464">Understanding Client Throttling Policies</span></span>](https://technet.microsoft.com/library/dd297964.aspx)
- [<span data-ttu-id="969e2-465">Clase ThrottlingPolicy</span><span class="sxs-lookup"><span data-stu-id="969e2-465">ThrottlingPolicy Class</span></span>](https://msdn.microsoft.com/library/ff342496%28v=EXCHG.140%29.aspx)
- [<span data-ttu-id="969e2-466">Directivas de limitación de peticiones y EWSFindCountLimit</span><span class="sxs-lookup"><span data-stu-id="969e2-466">Throttling Policies and the EWSFindCountLimit</span></span>](https://blogs.msdn.com/b/exchangedev/archive/2010/03/12/throttling-policies-and-the-ewsfindcountlimit.aspx)
- [<span data-ttu-id="969e2-467">Instantáneas de presupuesto en los registros de IIS</span><span class="sxs-lookup"><span data-stu-id="969e2-467">Budget Snapshots in the IIS Logs</span></span>](https://blogs.msdn.com/b/exchangedev/archive/2010/03/10/budget-snapshots-in-the-iis-logs.aspx)

- [<span data-ttu-id="969e2-468">Efectos de la limitación en su implementación en Exchange 2010 SP1</span><span class="sxs-lookup"><span data-stu-id="969e2-468">Effects of Throttling on Your Deployment in Exchange 2010 SP1</span></span>](http://msexchangeteam.com/archive/2010/08/27/456040.aspx)
- [<span data-ttu-id="969e2-469">Asociaciones de directivas de limitación de peticiones en Exchange 2010 SP1</span><span class="sxs-lookup"><span data-stu-id="969e2-469">Throttling Policy Associations in Exchange 2010 SP1</span></span>](http://msexchangeteam.com/archive/2010/08/02/455707.aspx)
- [<span data-ttu-id="969e2-470">Directivas de limitación de peticiones y CPUStartPercent</span><span class="sxs-lookup"><span data-stu-id="969e2-470">Throttling Policies and CPUStartPercent</span></span>](https://blogs.msdn.com/b/exchangedev/archive/2010/03/11/throttling-policies-and-cpustartpercent.aspx)
- [<span data-ttu-id="969e2-471">Suplantación y EWS en Exchange</span><span class="sxs-lookup"><span data-stu-id="969e2-471">Impersonation and EWS in Exchange</span></span>](impersonation-and-ews-in-exchange.md)
