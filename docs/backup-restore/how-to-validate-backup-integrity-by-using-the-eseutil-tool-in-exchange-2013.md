---
title: Validar la integridad de la copia de seguridad mediante la herramienta Eseutil en Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: b0d325ba-4482-4ca2-9a69-c890f985b206
description: Descubra cómo usar la herramienta de línea de comandos ESEUTIL para validar una copia de seguridad del almacén de Exchange.
ms.openlocfilehash: e8f1a46e2d94729ae5586861317312e277216d63
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/31/2020
ms.locfileid: "44452800"
---
#  <a name="validate-backup-integrity-by-using-the-eseutil-tool-in-exchange-2013"></a><span data-ttu-id="30a84-103">Validar la integridad de la copia de seguridad mediante la herramienta Eseutil en Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="30a84-103">Validate backup integrity by using the Eseutil tool in Exchange 2013</span></span>

<span data-ttu-id="30a84-104">Descubra cómo usar la herramienta de línea de comandos ESEUTIL para validar una copia de seguridad del almacén de Exchange.</span><span class="sxs-lookup"><span data-stu-id="30a84-104">Find out how to use the Eseutil command-line tool to validate a backup of the Exchange store.</span></span> 
  
<span data-ttu-id="30a84-105">**Se aplica a:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="30a84-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="30a84-106">Debido a que el servicio de instantáneas de volumen (VSS) puede crear copias de seguridad mientras Exchange sigue escribiendo en la base de datos, el servidor no toca todas las páginas y realiza las comprobaciones de coherencia necesarias.</span><span class="sxs-lookup"><span data-stu-id="30a84-106">Because the Volume Shadow Copy Service (VSS) can create backups while Exchange continues to write to the database, the server does not touch all the pages and perform the necessary consistency checks.</span></span> <span data-ttu-id="30a84-107">Por este motivo, cualquier aplicación de copia de seguridad y restauración que use VSS debe comprobar la coherencia de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="30a84-107">For this reason, any backup and restore application that uses VSS must verify snapshot consistency.</span></span> <span data-ttu-id="30a84-108">Exchange Server 2013 admite los siguientes dos métodos para comprobar la coherencia de la instantánea:</span><span class="sxs-lookup"><span data-stu-id="30a84-108">Exchange Server 2013 supports the following two methods for checking snapshot consistency:</span></span> 
  
- <span data-ttu-id="30a84-109">La API de CHKSGFILES</span><span class="sxs-lookup"><span data-stu-id="30a84-109">The CHKSGFILES API</span></span>
    
- <span data-ttu-id="30a84-110">Herramienta de línea de comandos Eseutil</span><span class="sxs-lookup"><span data-stu-id="30a84-110">The Eseutil command-line tool</span></span>
    
<span data-ttu-id="30a84-111">Le recomendamos que use la API CHKSGFILES porque es más fácil para la aplicación de copia de seguridad detectar, diagnosticar e informar de los errores que se encuentran durante la comprobación de coherencia CHKSGFILES.</span><span class="sxs-lookup"><span data-stu-id="30a84-111">We recommend that you use the CHKSGFILES API because it is easier for the backup application to detect, diagnose, and report errors that are found during the CHKSGFILES consistency check.</span></span> <span data-ttu-id="30a84-112">Para obtener información sobre cómo usar la API de CHKSGFILES, consulte [validar la integridad de la copia de seguridad mediante la API de CHKSGFILES en Exchange 2013](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md).</span><span class="sxs-lookup"><span data-stu-id="30a84-112">For information about how to use the CHKSGFILES API, see [Validate backup integrity by using the CHKSGFILES API in Exchange 2013](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md).</span></span>
  
## <a name="running-the-eseutil-tool"></a><span data-ttu-id="30a84-113">Ejecutar la herramienta Eseutil</span><span class="sxs-lookup"><span data-stu-id="30a84-113">Running the Eseutil tool</span></span>

<span data-ttu-id="30a84-114">Para comprobar la coherencia de la instantánea, ejecute el comando Eseutil en los archivos de registro y de base de datos que se identifican en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="30a84-114">To check the snapshot consistency, run the eseutil command against the database and log files that are identified in the following table.</span></span> 
  
<span data-ttu-id="30a84-115">**Tabla 1. Comandos de Eseutil. exe para cada tipo de copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="30a84-115">**Table 1. Eseutil.exe commands for each backup type**</span></span>

|<span data-ttu-id="30a84-116">**Tipo de archivo/tipo de copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="30a84-116">**File type/backup type**</span></span>|<span data-ttu-id="30a84-117">**Copia de seguridad completa**</span><span class="sxs-lookup"><span data-stu-id="30a84-117">**Full backup**</span></span>|<span data-ttu-id="30a84-118">**Copia de seguridad**</span><span class="sxs-lookup"><span data-stu-id="30a84-118">**Copy backup**</span></span>|<span data-ttu-id="30a84-119">**Copia de seguridad incremental**</span><span class="sxs-lookup"><span data-stu-id="30a84-119">**Incremental backup**</span></span>|<span data-ttu-id="30a84-120">**Copia de seguridad diferencial**</span><span class="sxs-lookup"><span data-stu-id="30a84-120">**Differential backup**</span></span>|
|:-----|:-----|:-----|:-----|:-----|
|<span data-ttu-id="30a84-121">. edb</span><span class="sxs-lookup"><span data-stu-id="30a84-121">.edb</span></span>  <br/> |<span data-ttu-id="30a84-122">"Eseutil/k/i"</span><span class="sxs-lookup"><span data-stu-id="30a84-122">"eseutil /k /i"</span></span>  <br/> |<span data-ttu-id="30a84-123">"Eseutil/k/i"</span><span class="sxs-lookup"><span data-stu-id="30a84-123">"eseutil /k /i"</span></span>  <br/> |<span data-ttu-id="30a84-124">No aplicable</span><span class="sxs-lookup"><span data-stu-id="30a84-124">Not applicable</span></span>  <br/> |<span data-ttu-id="30a84-125">No aplicable</span><span class="sxs-lookup"><span data-stu-id="30a84-125">Not applicable</span></span>  <br/> |
|<span data-ttu-id="30a84-126">. log</span><span class="sxs-lookup"><span data-stu-id="30a84-126">.log</span></span>  <br/> |<span data-ttu-id="30a84-127">"Eseutil/k" (1)</span><span class="sxs-lookup"><span data-stu-id="30a84-127">"eseutil /k" (1)</span></span>  <br/> |<span data-ttu-id="30a84-128">"Eseutil/k" (1)</span><span class="sxs-lookup"><span data-stu-id="30a84-128">"eseutil /k" (1)</span></span>  <br/> |<span data-ttu-id="30a84-129">"Eseutil/k" (2)</span><span class="sxs-lookup"><span data-stu-id="30a84-129">"eseutil /k" (2)</span></span>  <br/> |<span data-ttu-id="30a84-130">"Eseutil/k" (2)</span><span class="sxs-lookup"><span data-stu-id="30a84-130">"eseutil /k" (2)</span></span>  <br/> |
   
> [!NOTE]
> <span data-ttu-id="30a84-131">No es necesario ejecutar el comando Eseutil en los archivos. stm y. chk.</span><span class="sxs-lookup"><span data-stu-id="30a84-131">You do not need to run the eseutil command against .stm and .chk files.</span></span> 
  
<span data-ttu-id="30a84-132">Todos los archivos de registro que tienen un número de generación de archivos de registro que es igual o mayor que el número de generación del archivo de registro de controles es necesario para recuperar una base de datos de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="30a84-132">All the log files that have a log file generation number that is equal to or greater than the generation number of the checkpoint log file are required in order to recover a snapshot database.</span></span> <span data-ttu-id="30a84-133">Si existe, el archivo de registro actual (enn. log) también es necesario para la recuperación de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="30a84-133">If it exists, the current log file (Enn.log) is also required for database recovery.</span></span> <span data-ttu-id="30a84-134">Si alguno de los archivos de registro necesarios no supera la comprobación de coherencia, el solicitante debe asegurarse de que el estado del componente de copia de seguridad está establecido en FALSE antes de llamar al método [BackupComplete](https://msdn.microsoft.com/library/windows/desktop/aa382651%28v=vs.85%29.aspx) .</span><span class="sxs-lookup"><span data-stu-id="30a84-134">If any of the required log files fail the consistency check, the requester must make sure that the status of the backup component is set to FALSE before it calls the [BackupComplete](https://msdn.microsoft.com/library/windows/desktop/aa382651%28v=vs.85%29.aspx) method.</span></span> <span data-ttu-id="30a84-135">Para identificar el archivo de registro de punto de control, ejecute Eseutil. exe en el archivo de punto de control de instantánea y analice el resultado de "Checkpoint:".</span><span class="sxs-lookup"><span data-stu-id="30a84-135">To identify the checkpoint log file, run Eseutil.exe against the snapshot checkpoint file and parse the output for "Checkpoint:."</span></span> <span data-ttu-id="30a84-136">En el ejemplo siguiente se muestra cómo ejecutar Eseutil. exe en un archivo de punto de control.</span><span class="sxs-lookup"><span data-stu-id="30a84-136">The following example shows how to run Eseutil.exe against a checkpoint file.</span></span> 
  
```cpp
c:\eseutil.exe /mk E01.chk
Checkpoint: (0x20, 9D, 187)
```

<span data-ttu-id="30a84-137">La segunda línea del ejemplo es el valor devuelto, donde 0x20 es el número de generación de registro hexadecimal del archivo de registro de punto de control.</span><span class="sxs-lookup"><span data-stu-id="30a84-137">The second line in the example is the return value, where 0x20 is the hexadecimal log generation number of the checkpoint log file.</span></span> <span data-ttu-id="30a84-138">En este ejemplo, los archivos de registro, incluidos E01000020. log y versiones posteriores, no deben estar dañados para poder recuperar la base de datos de instantáneas, incluso si la propia base de datos ya ha superado la comprobación de coherencia física.</span><span class="sxs-lookup"><span data-stu-id="30a84-138">In this example, any log files, including E01000020.log and greater, must not be corrupt in order to recover the snapshot database, even if the database itself has already passed the physical consistency check.</span></span>
  
<span data-ttu-id="30a84-139">Todos los archivos de registro de un conjunto de copia de seguridad diferencial o incremental son necesarios para la recuperación de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="30a84-139">All log files in an incremental or differential backup set are required for database recovery.</span></span> <span data-ttu-id="30a84-140">Puede comprobar la coherencia de una secuencia de registro ejecutando Eseutil. exe en el prefijo del archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="30a84-140">You can check the consistency of a log sequence by running Eseutil.exe against the log file prefix.</span></span> <span data-ttu-id="30a84-141">En el ejemplo siguiente se muestra cómo ejecutar comprobaciones de coherencia en todos los archivos del formulario E01xxxxx. log en una ruta de acceso determinada.</span><span class="sxs-lookup"><span data-stu-id="30a84-141">The following example shows how to run consistency checks against all the files of the form E01xxxxx.log on a given path.</span></span>
  
```cpp
c:\eseutil /k E01
```

## <a name="checking-the-eseutilexe-output"></a><span data-ttu-id="30a84-142">Comprobación del resultado de Eseutil. exe</span><span class="sxs-lookup"><span data-stu-id="30a84-142">Checking the Eseutil.exe output</span></span>

<span data-ttu-id="30a84-143">El solicitante debe comprobar que todos los valores de error ERRORLEVEL de Exit devueltos son no negativos.</span><span class="sxs-lookup"><span data-stu-id="30a84-143">The requester must verify that all the exit ERRORLEVEL error values that are returned are nonnegative.</span></span> <span data-ttu-id="30a84-144">Para obtener información acerca de los valores de ERRORLEVEL, consulte [Reference for Common Eseutil Errors](https://technet.microsoft.com/library/aa996759%28v=exchg.80%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="30a84-144">For information about ERRORLEVEL values, see [Reference for Common Eseutil Errors](https://technet.microsoft.com/library/aa996759%28v=exchg.80%29.aspx).</span></span> <span data-ttu-id="30a84-145">Para ver el ERRORLEVEL en la línea de comandos, escriba "echo% ERRORLEVEL%" después de que Eseutil. exe termine de ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="30a84-145">To see the ERRORLEVEL at the command line, type "echo %errorlevel%" after Eseutil.exe finishes running.</span></span> <span data-ttu-id="30a84-146">Un ERRORLEVEL negativo indica que uno o varios archivos están dañados.</span><span class="sxs-lookup"><span data-stu-id="30a84-146">A negative ERRORLEVEL indicates that one or more files is corrupted.</span></span>
  
<span data-ttu-id="30a84-147">Antes de que el solicitante llame al método **BackupComplete** , debe asegurarse de que el estado del componente de copia de seguridad refleje el resultado de la comprobación de coherencia.</span><span class="sxs-lookup"><span data-stu-id="30a84-147">Before the requester calls the **BackupComplete** method, it must make sure that the status of the backup component reflects the result of the consistency check.</span></span> <span data-ttu-id="30a84-148">Si se encuentra algún daño, el estado será FALSE; Si no se ha encontrado ningún daño, el estado será TRUE.</span><span class="sxs-lookup"><span data-stu-id="30a84-148">If any corruption was found, the status will be FALSE; if no corruption was found, the status will be TRUE.</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="30a84-149">Vea también</span><span class="sxs-lookup"><span data-stu-id="30a84-149">See also</span></span>

- [<span data-ttu-id="30a84-150">Validar la integridad de la copia de seguridad mediante la API de CHKSGFILES en Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="30a84-150">Validate backup integrity by using the CHKSGFILES API in Exchange 2013</span></span>](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md)
- [<span data-ttu-id="30a84-151">Creación de aplicaciones de copia de seguridad y restauración para Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="30a84-151">Build backup and restore applications for Exchange 2013</span></span>](build-backup-and-restore-applications-for-exchange-2013.md)
- [<span data-ttu-id="30a84-152">Referencia de clase función cchksgfiles</span><span class="sxs-lookup"><span data-stu-id="30a84-152">CChkSGFiles class reference</span></span>](cchksgfiles-class-reference.md)
- [<span data-ttu-id="30a84-153">Conceptos de copia de seguridad y restauración para Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="30a84-153">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
    

