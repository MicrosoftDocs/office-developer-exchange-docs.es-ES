---
title: Escritor de Exchange en Exchange 2013
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: ec126433-9f0a-46ec-a685-ff4af2f97bc1
description: Obtenga información sobre el escritor de Exchange en Exchange 2013 para copia de seguridad y restaurar las operaciones.
ms.openlocfilehash: a4dc5963ab24a83969efc6e425b38a35276f3aa3
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/25/2018
ms.locfileid: "19762974"
---
# <a name="exchange-writer-in-exchange-2013"></a><span data-ttu-id="1fad4-103">Escritor de Exchange en Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="1fad4-103">Exchange writer in Exchange 2013</span></span>

<span data-ttu-id="1fad4-104">Obtenga información sobre el escritor de Exchange en Exchange 2013 para copia de seguridad y restaurar las operaciones.</span><span class="sxs-lookup"><span data-stu-id="1fad4-104">Find information about the Exchange writer in Exchange 2013 for backup and restore operations.</span></span> 
  
<span data-ttu-id="1fad4-105">**Se aplica a:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="1fad4-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="1fad4-106">El escritor de Exchange es responsable de la copia de seguridad y restauración de bases de datos de Exchange Server 2013 activos.</span><span class="sxs-lookup"><span data-stu-id="1fad4-106">The Exchange writer is responsible for the backup and restore of active Exchange Server 2013 databases.</span></span> <span data-ttu-id="1fad4-107">El escritor de Exchange también admite la funcionalidad de copia de seguridad de una base de datos seleccionado donde la instantánea se toma frente a la instancia replicada de la base de datos y transacciones los archivos de registro.</span><span class="sxs-lookup"><span data-stu-id="1fad4-107">The Exchange writer also supports backup functionality for a selected database where the shadow copy is taken against the replicated instance of the database and transaction log files.</span></span> 
  
## <a name="overview-of-the-exchange-writer"></a><span data-ttu-id="1fad4-108">Información general sobre el escritor de Exchange</span><span class="sxs-lookup"><span data-stu-id="1fad4-108">Overview of the Exchange writer</span></span>
<span data-ttu-id="1fad4-109"><a name="bk_Overview"> </a></span><span class="sxs-lookup"><span data-stu-id="1fad4-109"></span></span>

<span data-ttu-id="1fad4-110">Exchange 2013 incluye las características de movilidad de base de datos, que permiten a las bases de datos se replican entre los servidores de Exchange diferentes para mejorar la disponibilidad de base de datos y resistencia de sitios.</span><span class="sxs-lookup"><span data-stu-id="1fad4-110">Exchange 2013 includes database mobility features, which enable databases to be replicated among different Exchange servers to improve database availability and site resilience.</span></span> <span data-ttu-id="1fad4-111">Las demás copias de base de datos en un grupo de disponibilidad de base de datos (DAG) ofrecen una oportunidad valiosos para las copias de seguridad de Exchange utilizar los recursos adicionales que están disponibles en la ubicación de copia.</span><span class="sxs-lookup"><span data-stu-id="1fad4-111">The other database copies in a Database Availability Group (DAG) provide a valuable opportunity for Exchange backups to use the extra resources that are available at the copy location.</span></span> <span data-ttu-id="1fad4-112">Además, debido a que la copia en lugar del patrón de la base de datos activo se hace una copia, la copia puede ser no está disponible durante la copia de seguridad para un período de tiempo más largo.</span><span class="sxs-lookup"><span data-stu-id="1fad4-112">In addition, because the copy instead of the active database master is backed up, the copy can be unavailable during the backup for a longer period of time.</span></span> 
  
<span data-ttu-id="1fad4-113">El escritor de Exchange se coordina con los servicios de Exchange (en funcionamiento en nombre del solicitante) para preparar los archivos de base de datos para las copias de seguridad, inmovilizar la actividad de entrada y salida procedentes de transacciones de Exchange antes de realizar la copia de seguridad de la base de datos y, a continuación, liberar y truncar archivos de registro una vez finalizada la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="1fad4-113">The Exchange writer coordinates with the Exchange services (operating on behalf of the requester) to prepare the database files for backups, freeze the IO activity resulting from Exchange transactions before backing up the database, and then unfreeze and truncate log files after the backup is complete.</span></span>
  
<span data-ttu-id="1fad4-114">Durante una restauración, la aplicación de copia de seguridad y restauración indica el escritor de Exchange para coordinar con el almacén de Exchange (en funcionamiento en nombre del solicitante) para comprobar los destinos de restauración, el nombre del archivo de base de datos si es necesario y, a continuación, reproducir la transacción registros según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="1fad4-114">During a restore, your backup and restore application instructs the Exchange writer to coordinate with the Exchange store (operating on behalf of the requester) to verify the restore targets, rename the database file if necessary, and then replay the transaction logs as needed.</span></span> <span data-ttu-id="1fad4-115">El escritor de Exchange es compatible con las copias de seguridad y restauraciones.</span><span class="sxs-lookup"><span data-stu-id="1fad4-115">The Exchange writer supports both backups and restores.</span></span>
  
<span data-ttu-id="1fad4-116">El escritor de Exchange está disponible en cualquier servidor de Exchange que tenga instalado el rol de servidor de buzón de correo.</span><span class="sxs-lookup"><span data-stu-id="1fad4-116">The Exchange writer is available on any Exchange server that has the Mailbox server role installed.</span></span> 
  
## <a name="exchange-writer-configuration-settings"></a><span data-ttu-id="1fad4-117">Opciones de configuración del escritor de Exchange</span><span class="sxs-lookup"><span data-stu-id="1fad4-117">Exchange writer configuration settings</span></span>
<span data-ttu-id="1fad4-118"><a name="bk_ExchangeWriterConfig"> </a></span><span class="sxs-lookup"><span data-stu-id="1fad4-118"></span></span>

<span data-ttu-id="1fad4-119">El escritor de VSS de Exchange utiliza una variedad de opciones y valores que se deben establecer correctamente y se conservan durante las operaciones de copia de seguridad y restauración.</span><span class="sxs-lookup"><span data-stu-id="1fad4-119">The Exchange writer for VSS uses a variety of settings and values that must be set correctly and preserved during backup and restore operations.</span></span> <span data-ttu-id="1fad4-120">Estas opciones de configuración se almacenan en el documento de metadatos del escritor de Exchange.</span><span class="sxs-lookup"><span data-stu-id="1fad4-120">These configuration settings are stored in the Exchange writer metadata document.</span></span> <span data-ttu-id="1fad4-121">Si la aplicación de copia de seguridad no conservar estas opciones de configuración, es posible que experimenta errores inesperados al intentar realizar una copia de seguridad de las bases de datos de Exchange.</span><span class="sxs-lookup"><span data-stu-id="1fad4-121">If your backup application does not preserve these settings, you might experience unexpected errors when you attempt to back up your Exchange databases.</span></span> 
  
<span data-ttu-id="1fad4-122">En la siguiente tabla se enumera las interfaces VSS que exponen los metadatos sobre los componentes de la copia de seguridad de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1fad4-122">The following table lists the VSS interfaces that expose metadata about the components of your database backup.</span></span> <span data-ttu-id="1fad4-123">Estas interfaces son necesarias para que al escritor de Exchange documento de metadatos que se utiliza para realizar una copia de seguridad del almacén de Exchange.</span><span class="sxs-lookup"><span data-stu-id="1fad4-123">These interfaces are required to get the Exchange writer metadata document that is used to perform a backup of the Exchange store.</span></span>
  
<span data-ttu-id="1fad4-124">**La tabla 1. Interfaces VSS**</span><span class="sxs-lookup"><span data-stu-id="1fad4-124">**Table 1. VSS interfaces**</span></span>

|<span data-ttu-id="1fad4-125">**Interfaz VSS**</span><span class="sxs-lookup"><span data-stu-id="1fad4-125">**VSS interface**</span></span>|<span data-ttu-id="1fad4-126">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="1fad4-126">**Description**</span></span>|
|:-----|:-----|
|<span data-ttu-id="1fad4-127">IVssWMComponent</span><span class="sxs-lookup"><span data-stu-id="1fad4-127">IVssWMComponent</span></span>  <br/> |<span data-ttu-id="1fad4-128">Permite el acceso a la información de componente almacenada en el escritor de Exchange.</span><span class="sxs-lookup"><span data-stu-id="1fad4-128">Allows access to component information stored in the Exchange writer.</span></span>  <br/> |
|<span data-ttu-id="1fad4-129">IVssExamineWriterMetadata</span><span class="sxs-lookup"><span data-stu-id="1fad4-129">IVssExamineWriterMetadata</span></span>  <br/> |<span data-ttu-id="1fad4-130">Permite a la aplicación solicitante de copia de seguridad y restauración examinar los metadatos del escritor de Exchange.</span><span class="sxs-lookup"><span data-stu-id="1fad4-130">Allows the requesting backup and restore application to examine the metadata of the Exchange writer.</span></span> <span data-ttu-id="1fad4-131">El documento de metadatos del escritor de Exchange contiene valores específicos de Exchange 2013 y los parámetros que requiere la aplicación de copia de seguridad y restauración solicitante para que pueden especificar correctamente los componentes adecuados para copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="1fad4-131">The Exchange writer metadata document contains Exchange 2013-specific values and parameters that the requesting backup and restore application requires so that it can correctly specify the appropriate components for backup.</span></span>  <br/> |
|<span data-ttu-id="1fad4-132">IVssComponent</span><span class="sxs-lookup"><span data-stu-id="1fad4-132">IVssComponent</span></span>  <br/> |<span data-ttu-id="1fad4-133">Contiene métodos para examinar y modificar la información acerca de los componentes contenidos en el documento de componentes de copia de seguridad de un solicitante.</span><span class="sxs-lookup"><span data-stu-id="1fad4-133">Contains methods for examining and modifying information about components contained in a requester's Backup Components Document.</span></span> <span data-ttu-id="1fad4-134">Sólo se pueden obtener objetos para los componentes que se han agregado explícitamente a este documento por el método [IVssBackupComponents::AddComponent](http://msdn.microsoft.com/es-es/library/windows/desktop/aa382646%28v=vs.85%29.aspx) .</span><span class="sxs-lookup"><span data-stu-id="1fad4-134">Objects can only be obtained for those components that have been explicitly added to this document by the [IVssBackupComponents::AddComponent](http://msdn.microsoft.com/es-es/library/windows/desktop/aa382646%28v=vs.85%29.aspx) method.</span></span>  <br/> |
|<span data-ttu-id="1fad4-135">IVssBackupComponents</span><span class="sxs-lookup"><span data-stu-id="1fad4-135">IVssBackupComponents</span></span>  <br/> |<span data-ttu-id="1fad4-136">Usa la aplicación de copia de seguridad y restauración solicitante para sondear el escritor de Exchange acerca del estado de archivo y para ejecutar copia de seguridad y restaurar las operaciones.</span><span class="sxs-lookup"><span data-stu-id="1fad4-136">Used by the requesting backup and restore application to poll the Exchange writer about file status and to run backup and restore operations.</span></span> <span data-ttu-id="1fad4-137">El método [IVssBackupComponents:: SetBackupState](http://msdn.microsoft.com/es-es/library/windows/desktop/aa382833%28v=vs.85%29.aspx) define si la operación de copia de seguridad es una completa, copia, incremental, o una copia de seguridad diferencial.</span><span class="sxs-lookup"><span data-stu-id="1fad4-137">The [IVssBackupComponents::SetBackupState ](http://msdn.microsoft.com/es-es/library/windows/desktop/aa382833%28v=vs.85%29.aspx) method defines whether the backup operation is a full, copy, incremental, or differential backup.</span></span> <span data-ttu-id="1fad4-138">El método [IVssBackupComponents::AddRestoreSubcomponent](http://msdn.microsoft.com/es-es/library/windows/desktop/aa382649%28v=vs.85%29.aspx) define los subcomponentes de una base de datos de Exchange 2013 que puede seleccionar para una operación de restauración.</span><span class="sxs-lookup"><span data-stu-id="1fad4-138">The [IVssBackupComponents::AddRestoreSubcomponent](http://msdn.microsoft.com/es-es/library/windows/desktop/aa382649%28v=vs.85%29.aspx) method defines the subcomponents of an Exchange 2013 database that can be selected for a restore operation.</span></span>  <br/> |
   
<span data-ttu-id="1fad4-139">En el sistema de archivos de Windows Server, una base de datos de Exchange 2013 se almacena como un archivo de base de datos único con una extensión *.edb. El escritor de Exchange expone la *.edb como el componente de base de datos, mientras que los registros de transacciones (*. log) y archivos de punto de comprobación (*.chk) se combinan en un solo componente, que se conoce como el componente de registro.</span><span class="sxs-lookup"><span data-stu-id="1fad4-139">Within the Windows Server file system, an Exchange 2013 database is stored as a single database file with an extension *.edb. The Exchange writer exposes the *.edb as the database component, while transaction logs (*.log) and checkpoint files (*.chk) are combined into a single component, referred to as the log component.</span></span> <span data-ttu-id="1fad4-140">Para obtener más información acerca de los archivos de base de datos de Exchange, consulte [conceptos de copia de seguridad y restauración para Exchange 2013](backup-and-restore-concepts-for-exchange-2013.md).</span><span class="sxs-lookup"><span data-stu-id="1fad4-140">For more information about Exchange database files, see [Backup and restore concepts for Exchange 2013](backup-and-restore-concepts-for-exchange-2013.md).</span></span>
  
## <a name="interactions-between-the-exchange-writer-vss-and-vss-requesters"></a><span data-ttu-id="1fad4-141">Las interacciones entre el escritor, VSS y VSS de Exchange los solicitantes</span><span class="sxs-lookup"><span data-stu-id="1fad4-141">Interactions between the Exchange writer, VSS, and VSS requesters</span></span>
<span data-ttu-id="1fad4-142"><a name="bk_interactions"> </a></span><span class="sxs-lookup"><span data-stu-id="1fad4-142"></span></span>

<span data-ttu-id="1fad4-143">La interacción de alto nivel entre el VSS, el escritor de Exchange y Exchange 2013 durante las operaciones de copia de seguridad es como sigue:</span><span class="sxs-lookup"><span data-stu-id="1fad4-143">The high-level interaction between the VSS, the Exchange writer, and Exchange 2013 during backup operations is as follows:</span></span>
  
1. <span data-ttu-id="1fad4-144">El programa copia de seguridad (o el agente) se ejecuta un trabajo programado.</span><span class="sxs-lookup"><span data-stu-id="1fad4-144">The backup program (or agent) runs a scheduled job.</span></span> 
    
2. <span data-ttu-id="1fad4-145">El solicitante VSS en la aplicación de copia de seguridad y restauración envía un comando al VSS para que realice una instantánea de las bases de datos de Exchange 2013 seleccionados.</span><span class="sxs-lookup"><span data-stu-id="1fad4-145">The VSS requester in the backup and restore application sends a command to VSS to take a shadow copy of the selected Exchange 2013 databases.</span></span> 
    
3. <span data-ttu-id="1fad4-146">VSS se comunica con el escritor de Exchange para preparar una copia de seguridad de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="1fad4-146">VSS communicates with the Exchange writer to prepare for a snapshot backup.</span></span> <span data-ttu-id="1fad4-147">Exchange 2013 prohíbe acciones administrativas frente a las bases de datos, comprueba las dependencias del volumen y suspende todas las operaciones de escritura a la instancia seleccionada de los archivos de registro de transacciones y de base de datos al tiempo que permite el acceso de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="1fad4-147">Exchange 2013 prohibits administrative actions against the databases, checks volume dependencies, and suspends all write operations to selected instance of the database and transaction log files while allowing read-only access.</span></span> 
    
4. <span data-ttu-id="1fad4-148">VSS se comunica con el proveedor de almacenamiento correspondiente para crear una instantánea del volumen de almacenamiento que contiene las bases de datos de Exchange 2013.</span><span class="sxs-lookup"><span data-stu-id="1fad4-148">VSS communicates with the appropriate storage provider to create a shadow copy of the storage volume that contains the Exchange 2013 databases.</span></span> 
    
5. <span data-ttu-id="1fad4-149">VSS libera 2013 de Exchange para reanudar las operaciones normales.</span><span class="sxs-lookup"><span data-stu-id="1fad4-149">VSS releases Exchange 2013 to resume ordinary operations.</span></span> 
    
6. <span data-ttu-id="1fad4-150">El solicitante VSS, comprueba la coherencia física de la copia de seguridad antes de que la copia de seguridad tuvo éxito de señalización.</span><span class="sxs-lookup"><span data-stu-id="1fad4-150">The VSS requester verifies the physical consistency of the backup set prior to signaling that the backup was successful.</span></span> <span data-ttu-id="1fad4-151">Exchange 2013 trunca los registros de transacciones (si la base de datos forma parte de un DAG, el truncamiento del registro se replica entre todas las copias) y la hora de la última copia de seguridad de la base de datos de registros.</span><span class="sxs-lookup"><span data-stu-id="1fad4-151">Exchange 2013 truncates the transaction logs (if the database is part of a DAG, log truncation is replicated among all the copies) and records the time of the last backup for the database.</span></span>
    
<span data-ttu-id="1fad4-152">VSS serializa la interacción de los solicitantes con el escritor de Exchange con el método [OnPrepareBackup](http://msdn.microsoft.com/es-es/library/windows/desktop/aa381571%28v=vs.85%29.aspx) iniciales y finales con el método [OnPostSnapshot](http://msdn.microsoft.com/es-es/library/windows/desktop/aa381568%28v=vs.85%29.aspx) .</span><span class="sxs-lookup"><span data-stu-id="1fad4-152">VSS serializes requesters' interaction with the Exchange writer starting with the [OnPrepareBackup](http://msdn.microsoft.com/es-es/library/windows/desktop/aa381571%28v=vs.85%29.aspx) method and ending with the [OnPostSnapshot](http://msdn.microsoft.com/es-es/library/windows/desktop/aa381568%28v=vs.85%29.aspx) method.</span></span> <span data-ttu-id="1fad4-153">Normalmente, la mayor parte del tiempo que dedica a trabajar con la copia de la sombra el escritor de Exchange se produce después del método **OnPostSnapshot** , cuando se comprueba la coherencia de la instantánea antes de la finalización de las copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="1fad4-153">Typically, the majority of time the Exchange writer spends working with the shadow copy occurs after the **OnPostSnapshot** method, when the consistency of the shadow copy is verified prior to completion of the backups.</span></span> <span data-ttu-id="1fad4-154">El escritor de Exchange admite copias de seguridad paralelas entre **OnPostSnapshot** y [OnBackupComplete](http://msdn.microsoft.com/es-es/library/windows/desktop/aa381557%28v=vs.85%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="1fad4-154">The Exchange writer supports parallel backups between **OnPostSnapshot** and [OnBackupComplete](http://msdn.microsoft.com/es-es/library/windows/desktop/aa381557%28v=vs.85%29.aspx).</span></span>
  
<span data-ttu-id="1fad4-155">Exchange 2013 no admite las copias de seguridad simultáneas de la misma base de datos.</span><span class="sxs-lookup"><span data-stu-id="1fad4-155">Exchange 2013 does not allow concurrent backups of the same database.</span></span> <span data-ttu-id="1fad4-156">Sólo un trabajo de copia de seguridad a la vez puede ejecutar en una base de datos determinada.</span><span class="sxs-lookup"><span data-stu-id="1fad4-156">Only one backup job can run against a given database at one time.</span></span> <span data-ttu-id="1fad4-157">Cuando se ejecuta la copia de seguridad, el almacén de Exchange coloca la base de datos en un estado de copia de seguridad en curso.</span><span class="sxs-lookup"><span data-stu-id="1fad4-157">When the backup is running, the Exchange store puts the database in a backup-in-progress state.</span></span> <span data-ttu-id="1fad4-158">Este estado en memoria está desactivada ya sea en la finalización del proceso de copia de seguridad o cuando se reinicia el servicio.</span><span class="sxs-lookup"><span data-stu-id="1fad4-158">This in-memory state is cleared either at the completion of the backup process or when the service is restarted.</span></span> <span data-ttu-id="1fad4-159">El estado de copia de seguridad en curso en la memoria y los datos asociados se pierden cuando se reinicia el servicio que hospeda el escritor de Exchange, cuando se reinicie el sistema operativo, o cuando se produce una conmutación por error del clúster.</span><span class="sxs-lookup"><span data-stu-id="1fad4-159">The in-memory backup-in-progress state and its associated data are lost when the service that hosts the Exchange writer is restarted, when the operating system is restarted, or when a cluster failover occurs.</span></span> <span data-ttu-id="1fad4-160">Cualquiera de estos eventos hará que el trabajo de copia de seguridad se lleve a cabo.</span><span class="sxs-lookup"><span data-stu-id="1fad4-160">Any of these events will cause the backup job to fail.</span></span>
  
<span data-ttu-id="1fad4-161">Truncamiento de archivo de registro de transacciones iniciadas por la copia de seguridad se desencadena en función del tipo de copia de seguridad que se debe realizar.</span><span class="sxs-lookup"><span data-stu-id="1fad4-161">Backup-initiated transaction log file truncation is triggered based on the type of backup to be performed.</span></span> <span data-ttu-id="1fad4-162">En las configuraciones que no sean DAG, el escritor de Exchange truncará los archivos de registro de transacciones en la realización de copias de seguridad completas o incrementales correctas.</span><span class="sxs-lookup"><span data-stu-id="1fad4-162">In non-DAG configurations, the Exchange writer will truncate the transaction log files at the completion of successful full or incremental backups.</span></span> <span data-ttu-id="1fad4-163">En DAG replicado las configuraciones, se retrasará el truncamiento del registro por el servicio de replicación hasta que todos los archivos de registro necesarios se reproducen en todas las demás copias.</span><span class="sxs-lookup"><span data-stu-id="1fad4-163">In DAG replicated configurations, log truncation will be delayed by the replication service until all necessary log files are replayed into all other copies.</span></span> <span data-ttu-id="1fad4-164">El servicio de replicación, eliminará la copia de seguridad de los archivos de registro que tanto desde el activo y la copia del registro las rutas de acceso de archivo después de comprobar que los archivos de registro se han aplicado correctamente a la base de datos de la copia y ambas bases de datos activo y ha pasado el punto de control de copias de base de datos los archivos de registro que se va a eliminar.</span><span class="sxs-lookup"><span data-stu-id="1fad4-164">The replication service will delete the backed up log files both from the active and the copy log file paths after it verifies that the log files have successfully been applied to the copy database and both active database and the database copies checkpoint has passed the log files to be deleted.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="1fad4-165">Vea también</span><span class="sxs-lookup"><span data-stu-id="1fad4-165">See also</span></span>

- [<span data-ttu-id="1fad4-166">Los registros de transacciones y archivos de punto de comprobación de copia de seguridad y restauración en Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="1fad4-166">Transaction logs and checkpoint files for backup and restore in Exchange 2013</span></span>](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md)
    
- [<span data-ttu-id="1fad4-167">Conceptos de copia de seguridad y restauración para Exchange 2013</span><span class="sxs-lookup"><span data-stu-id="1fad4-167">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
    

